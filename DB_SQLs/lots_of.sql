SELECT bool_and(customer_username IN (SELECT pays.customer_username FROM pays INNER JOIN event ON pays.event_name = event.event_name AND pays.event_start_date = event.event_start_date AND pays.event_location = event.event_location AND event.event_name = 'Event 01' AND event.event_start_date = '2015-03-25 09:00:00' AND event.event_location = 'miradero' AND event.event_active) OR customer_username IN (SELECT distinct is_a.customer_username FROM is_a INNER JOIN event ON is_a.event_name = event.event_name AND is_a.event_start_date = event.event_start_date AND is_a.event_location = event.event_location AND event.event_name = 'Event 01' AND event.event_start_date = '2015-03-25 09:00:00' AND event.event_location = 'miradero' AND event.event_active)) FROM customer WHERE customer_username = 'rapol'

select distinct is_a.customer_username, event.event_name, event.event_start_date, event.event_location from is_a inner join event on is_a.event_name = event.event_name and is_a.event_start_date = event.event_start_date and is_a.event_location = event.event_location;

SELECT distinct customer.customer_username, event.event_end_date FROM is_a join event on is_a.event_name = event.event_name and is_a.event_start_date = event.event_start_date and is_a.event_location = event.event_location join pays ON pays.event_name = event.event_name AND pays.event_start_date = event.event_start_date AND pays.event_location = event.event_location join hosts on hosts.event_name = event.event_name AND hosts.event_start_date = event.event_start_date AND hosts.event_location = event.event_location join belongs_to on belongs_to.organization_name = hosts.organization_name join customer on customer.customer_username = pays.customer_username or customer.customer_username = is_a.customer_username or customer.customer_username = event.customer_username or customer.customer_username = belongs_to.customer_username where event.event_name = 'Event 01' AND event.event_start_date = '2015-03-25 09:00:00' AND event.event_location = 'miradero' AND customer.customer_username = 'test02' and event.event_active;

SELECT distinct customer.customer_username, event.event_end_date FROM is_a JOIN event ON is_a.event_name = event.event_name AND is_a.event_start_date = event.event_start_date AND is_a.event_location = event.event_location JOIN pays ON pays.event_name = event.event_name AND pays.event_start_date = event.event_start_date AND pays.event_location = event.event_location JOIN hosts ON hosts.event_name = event.event_name AND hosts.event_start_date = event.event_start_date AND hosts.event_location = event.event_location JOIN belongs_to ON belongs_to.organization_name = hosts.organization_name JOIN customer ON customer.customer_username = pays.customer_username OR customer.customer_username = is_a.customer_username OR customer.customer_username = event.customer_username OR customer.customer_username = belongs_to.customer_username where event.event_name = $1 AND event.event_start_date = $2 AND event.event_location = $3 AND customer.customer_username = $4 AND event.event_active

-- Get event_pk
SELECT event_name, event_start_date, event_location, customer_username FROM event;

-- vvvvvvv Check if Event Organizer (for regular Events) [Not really needed]
SELECT distinct customer.customer_username FROM customer JOIN event ON customer.customer_username = event.customer_username WHERE event.event_name = 'Event 02' AND event.event_start_date = '2015-05-05 09:00:00' AND event.event_location = 'miradero' AND customer.customer_username = 'rapol' AND event.event_active;

SELECT distinct customer.customer_username FROM customer JOIN event ON customer.customer_username = event.customer_username WHERE event.event_name = $1 AND event.event_start_date = $2 AND event.event_location = $3 AND customer.customer_username = $4 AND event.event_active;
-- ^^^^^^^ Check if Event Organizer (for regular Events) [Not really needed]

-- vvvvvvv Check if Event Organizer (For every type of Event)
SELECT distinct customer.customer_username FROM event LEFT OUTER JOIN hosts ON hosts.event_name = event.event_name AND hosts.event_start_date = event.event_start_date AND hosts.event_location = event.event_location LEFT OUTER JOIN belongs_to ON belongs_to.organization_name = hosts.organization_name JOIN customer ON customer.customer_username = event.customer_username OR customer.customer_username = belongs_to.customer_username WHERE event.event_name = 'HELLOOOO!!!' AND event.event_start_date = '2015-04-27 22:00:00' AND event.event_location = 'La Serrania' AND customer.customer_username = 'papaluisre' AND event.event_active;

SELECT distinct customer.customer_username FROM event LEFT OUTER JOIN hosts ON hosts.event_name = event.event_name AND hosts.event_start_date = event.event_start_date AND hosts.event_location = event.event_location LEFT OUTER JOIN belongs_to ON belongs_to.organization_name = hosts.organization_name JOIN customer ON customer.customer_username = event.customer_username OR customer.customer_username = belongs_to.customer_username WHERE event.event_name = $1 AND event.event_start_date = $2 AND event.event_location = $3 AND customer.customer_username = $4 AND event.event_active;
-- ^^^^^^^ Check if Event Organizer (For every type of Event)

-- vvvvvvv Check if Event Organizer (for hosted Events)
SELECT distinct customer.customer_username FROM hosts JOIN event ON hosts.event_name = event.event_name AND hosts.event_start_date = event.event_start_date AND hosts.event_location = event.event_location JOIN belongs_to ON belongs_to.organization_name = hosts.organization_name JOIN customer ON customer.customer_username = event.customer_username OR customer.customer_username = belongs_to.customer_username WHERE event.event_name = 'Event 01' AND event.event_start_date = '2015-03-25 09:00:00' AND event.event_location = 'miradero' AND customer.customer_username = 'papaluisre' AND event.event_active;

SELECT distinct customer.customer_username FROM hosts JOIN event ON hosts.event_name = event.event_name AND hosts.event_start_date = event.event_start_date AND hosts.event_location = event.event_location JOIN belongs_to ON belongs_to.organization_name = hosts.organization_name JOIN customer ON customer.customer_username = event.customer_username OR customer.customer_username = belongs_to.customer_username WHERE event.event_name = $1 AND event.event_start_date = $2 AND event.event_location = $3 AND customer.customer_username = $4 AND event.event_active;

SELECT distinct customer.customer_username FROM hosts JOIN event ON hosts.event_name = event.event_name AND hosts.event_start_date = event.event_start_date AND hosts.event_location = event.event_location JOIN belongs_to ON belongs_to.organization_name = hosts.organization_name JOIN customer ON customer.customer_username = event.customer_username OR customer.customer_username = belongs_to.customer_username WHERE event.event_name = 'Event 01' AND event.event_start_date = '2015-03-25T13:00:00.000Z' AND event.event_location = 'miradero' AND customer.customer_username = 'ollidab' AND event.event_active;
-- ^^^^^^^ Check if Event Organizer (for hosted Events)

-- Get meetup_pk and creator username
SELECT event_name, event_start_date, event_location, meetup_location, meetup_start_date, customer_username FROM meetup;

-- vvvvvvv Check if can delete Meetup
SELECT distinct customer.customer_username FROM meetup JOIN event ON meetup.event_name = event.event_name AND meetup.event_start_date = event.event_start_date AND meetup.event_location = event.event_location join hosts ON hosts.event_name = event.event_name AND hosts.event_start_date = event.event_start_date AND hosts.event_location = event.event_location JOIN belongs_to ON belongs_to.organization_name = hosts.organization_name JOIN customer ON customer.customer_username = event.customer_username OR customer.customer_username = belongs_to.customer_username OR customer.customer_username = meetup.customer_username WHERE event.event_name = 'Event 01' AND event.event_start_date = '2015-03-25 09:00:00' AND event.event_location = 'miradero' AND customer.customer_username = 'rapol' AND meetup.customer_username = 'ollidab' AND meetup.meetup_start_date = $6 AND meetup.meetup_location = $7 AND event.event_active;

SELECT distinct customer.customer_username FROM meetup JOIN event ON meetup.event_name = event.event_name AND meetup.event_start_date = event.event_start_date AND meetup.event_location = event.event_location join hosts ON hosts.event_name = event.event_name AND hosts.event_start_date = event.event_start_date AND hosts.event_location = event.event_location JOIN belongs_to ON belongs_to.organization_name = hosts.organization_name JOIN customer ON customer.customer_username = event.customer_username OR customer.customer_username = belongs_to.customer_username OR customer.customer_username = meetup.customer_username WHERE event.event_name = $1 AND event.event_start_date = $2 AND event.event_location = $3 AND customer.customer_username = $4 AND meetup.customer_username = $5 AND meetup.meetup_start_date = $6 AND meetup.meetup_location = $7 AND event.event_active;
-- ^^^^^^^ Check if can delete Meetup

-- vvvvvvv Check if Spectator/Competitors/Organizers (for hosted Events)
SELECT distinct customer.customer_username, event.event_end_date FROM is_a JOIN event ON is_a.event_name = event.event_name AND is_a.event_start_date = event.event_start_date AND is_a.event_location = event.event_location JOIN pays ON pays.event_name = event.event_name AND pays.event_start_date = event.event_start_date AND pays.event_location = event.event_location JOIN hosts ON hosts.event_name = event.event_name AND hosts.event_start_date = event.event_start_date AND hosts.event_location = event.event_location JOIN belongs_to ON belongs_to.organization_name = hosts.organization_name JOIN customer ON customer.customer_username = pays.customer_username OR customer.customer_username = is_a.customer_username OR customer.customer_username = event.customer_username OR customer.customer_username = belongs_to.customer_username WHERE event.event_name = 'Event 01' AND event.event_start_date = '2015-03-25 09:00:00' AND event.event_location = 'miradero' AND customer.customer_username = 'papaluisre' AND event.event_active;

SELECT distinct customer.customer_username, event.event_end_date FROM is_a JOIN event ON is_a.event_name = event.event_name AND is_a.event_start_date = event.event_start_date AND is_a.event_location = event.event_location JOIN pays ON pays.event_name = event.event_name AND pays.event_start_date = event.event_start_date AND pays.event_location = event.event_location JOIN hosts ON hosts.event_name = event.event_name AND hosts.event_start_date = event.event_start_date AND hosts.event_location = event.event_location JOIN belongs_to ON belongs_to.organization_name = hosts.organization_name JOIN customer ON customer.customer_username = pays.customer_username OR customer.customer_username = is_a.customer_username OR customer.customer_username = event.customer_username OR customer.customer_username = belongs_to.customer_username WHERE event.event_name = $1 AND event.event_start_date = $2 AND event.event_location = $3 AND customer.customer_username = $4 AND event.event_active;
-- ^^^^^^^ Check if Spectator/Competitors/Organizers (for hosted Events)

-- vvvvvvv Check if can write Review (Spectator/Competitors) (for hosted Events)
SELECT distinct customer.customer_username, event.event_end_date FROM is_a JOIN event ON is_a.event_name = event.event_name AND is_a.event_start_date = event.event_start_date AND is_a.event_location = event.event_location JOIN pays ON pays.event_name = event.event_name AND pays.event_start_date = event.event_start_date AND pays.event_location = event.event_location JOIN hosts ON hosts.event_name = event.event_name AND hosts.event_start_date = event.event_start_date AND hosts.event_location = event.event_location JOIN customer ON customer.customer_username = pays.customer_username OR customer.customer_username = is_a.customer_username WHERE event.event_name = 'Event 01' AND event.event_start_date = '2015-03-25 09:00:00' AND event.event_location = 'miradero' AND customer.customer_username = 'test01' AND event.event_active;

SELECT distinct customer.customer_username, event.event_end_date FROM is_a JOIN event ON is_a.event_name = event.event_name AND is_a.event_start_date = event.event_start_date AND is_a.event_location = event.event_location JOIN pays ON pays.event_name = event.event_name AND pays.event_start_date = event.event_start_date AND pays.event_location = event.event_location JOIN hosts ON hosts.event_name = event.event_name AND hosts.event_start_date = event.event_start_date AND hosts.event_location = event.event_location JOIN customer ON customer.customer_username = pays.customer_username OR customer.customer_username = is_a.customer_username WHERE event.event_name = $1 AND event.event_start_date = $2 AND event.event_location = $3 -- List of all who can write reviews for a given event
 AND customer.customer_username = $4 AND event.event_active; -- Check if I'm on the list
-- ^^^^^^^ Check if Spectator/Competitors/Organizers (for hosted Events)

-- vvvvvvv Check if your Review
SELECT distinct customer.customer_username FROM review JOIN event ON review.event_name = event.event_name AND review.event_start_date = event.event_start_date AND review.event_location = event.event_location JOIN customer ON customer.customer_username = review.customer_username WHERE event.event_name = 'Event 01' AND event.event_start_date = '2015-03-25 09:00:00' AND event.event_location = 'miradero' AND customer.customer_username = 'papaluisre' AND review.customer_username = 'ollidab' AND event.event_active;

SELECT distinct customer.customer_username FROM review JOIN event ON review.event_name = event.event_name AND review.event_start_date = event.event_start_date AND review.event_location = event.event_location JOIN customer ON customer.customer_username = review.customer_username WHERE event.event_name = $1 AND event.event_start_date = $2 AND event.event_location = $3 AND customer.customer_username = $4 AND review.customer_username = $5 AND event.event_active;
-- ^^^^^^^ Check if your Review

-- vvvvvvv Check if your Meetup
SELECT distinct customer.customer_username FROM meetup JOIN event ON meetup.event_name = event.event_name AND meetup.event_start_date = event.event_start_date AND meetup.event_location = event.event_location JOIN customer ON customer.customer_username = meetup.customer_username WHERE event.event_name = 'Event 01' AND event.event_start_date = '2015-03-25 09:00:00' AND event.event_location = 'miradero' AND customer.customer_username = 'papaluisre' AND meetup.customer_username = 'ollidab' AND meetup.meetup_start_date = $6 AND meetup.meetup_location = $7 AND event.event_active;

SELECT distinct customer.customer_username, event.event_end_date FROM meetup JOIN event ON meetup.event_name = event.event_name AND meetup.event_start_date = event.event_start_date AND meetup.event_location = event.event_location JOIN customer ON customer.customer_username = meetup.customer_username WHERE event.event_name = $1 AND event.event_start_date = $2 AND event.event_location = $3 AND customer.customer_username = $4 AND meetup.customer_username = $5 AND meetup.meetup_start_date = $6 AND meetup.meetup_location = $7 AND event.event_active;
-- ^^^^^^^ Check if your Meetup

-- vvvvvvv Get competitors info
SELECT distinct customer.customer_username, customer.customer_first_name, customer.customer_last_name, customer.customer_tag, customer.customer_profile_pic, tournament.competitor_fee FROM event JOIN is_a ON is_a.event_name = event.event_name AND is_a.event_start_date = event.event_start_date AND is_a.event_location = event.event_location JOIN tournament ON tournament.event_name = event.event_name AND tournament.event_start_date = event.event_start_date AND tournament.event_location = event.event_location AND is_a.tournament_name = tournament.tournament_name JOIN customer ON customer.customer_username = is_a.customer_username WHERE event.event_name = 'Event 01' AND event.event_start_date = '2015-03-25 09:00:00' AND event.event_location = 'miradero';
-- ^^^^^^^ Get competitors info

-- vvvvvvv Get spectators info
SELECT distinct customer.customer_username, customer.customer_first_name, customer.customer_last_name, customer.customer_tag, customer.customer_profile_pic, pays.spec_fee_name FROM event JOIN pays ON pays.event_name = event.event_name AND pays.event_start_date = event.event_start_date AND pays.event_location = event.event_location JOIN customer ON customer.customer_username = pays.customer_username WHERE event.event_name = 'Event 01' AND event.event_start_date = '2015-03-25 09:00:00' AND event.event_location = 'miradero';
-- ^^^^^^^ Get spectators info

 select news_number, news_title, news_content, news_date_posted, bool_and(news_number IN (SELECT news.news_number FROM hosts JOIN event ON hosts.event_name = event.event_name AND hosts.event_start_date = event.event_start_date AND hosts.event_location = event.event_location JOIN belongs_to ON belongs_to.organization_name = hosts.organization_name JOIN customer ON customer.customer_username = event.customer_username OR customer.customer_username = belongs_to.customer_username JOIN news ON news.event_name = event.event_name AND news.event_start_date = event.event_start_date AND news.event_location = event.event_location WHERE event.event_name = 'Event 01' AND event.event_start_date = '2015-03-25 09:00:00' AND event.event_location = 'miradero' AND customer.customer_username = 'papaluisre' AND event.event_active)) AS can_edit from news GROUP BY news_number, news_title, news_content, news_date_posted;

SELECT distinct customer.customer_username FROM event LEFT OUTER JOIN hosts ON hosts.event_name = event.event_name AND hosts.event_start_date = event.event_start_date AND hosts.event_location = event.event_location LEFT OUTER JOIN belongs_to ON belongs_to.organization_name = hosts.organization_name JOIN customer ON customer.customer_username = event.customer_username OR customer.customer_username = belongs_to.customer_username WHERE event.event_name = 'HELLOOOO!!!' AND event.event_start_date = '2015-04-27 22:00:00' AND event.event_location = 'La Serrania' AND event.event_active;

SELECT event.event_name, event.event_start_date, event.event_end_date, event.event_location, event.event_venue, event.event_banner, event.event_logo, event.event_end_date, event.event_registration_deadline, event.event_rules, event.event_description, event.event_deduction_fee, event.event_is_online, event.event_type, bool_and(concat(event.event_name, event.event_location, event.event_start_date) IN (SELECT concat(event.event_name, event.event_location, event.event_start_date) FROM hosts)) as is_hosted FROM event WHERE event.event_name = 'HELLOOOO!!!' AND event.event_start_date = '2015-04-27 22:00:00' AND event.event_location = 'La Serrania' AND event_active GROUP BY event_name, event_start_date, event_location;

SELECT event.event_name, event.event_start_date, event.event_end_date, event.event_location, event.event_venue, event.event_banner, event.event_logo, event.event_end_date, event.event_registration_deadline, event.event_rules, event.event_description, event.event_deduction_fee, event.event_is_online, event.event_type, event.customer_username AS creator, hosts.organization_name AS host FROM event JOIN hosts ON hosts.event_name = event.event_name AND hosts.event_start_date = event.event_start_date AND hosts.event_location = event.event_location WHERE event_name = $1 AND event_start_date = $2 AND event_location = $3 AND event_active GROUP BY event_name, event_start_date, event_location

-- vvvvvvv New query for event info
SELECT event.event_name, event.event_start_date, event.event_end_date, event.event_location, event.event_venue, event.event_banner, event.event_logo, event.event_registration_deadline, event.event_rules, event.event_description, event.event_deduction_fee, event.event_is_online, event.event_type, event.customer_username AS creator, hosts.organization_name AS host FROM event LEFT OUTER JOIN hosts ON hosts.event_name = event.event_name AND hosts.event_start_date = event.event_start_date AND hosts.event_location = event.event_location WHERE event.event_name = 'Event 05' AND event.event_start_date = '2025-11-19 09:00:00' AND event.event_location = 'Calle Bosque, Mayaguez, PR 00681-9042' AND event.event_active;
-- ^^^^^^^ New query for event info

SELECT event.event_name, event.event_start_date, event.event_end_date, event.event_location, event.event_logo, event.event_end_date, event.event_registration_deadline, event.event_rules, event.event_description, event.event_deduction_fee, event.event_is_online, event.event_type, bool_and(concat(event.event_name, event.event_location, event.event_start_date) IN (SELECT concat(event.event_name, event.event_location, event.event_start_date) FROM hosts)) as is_hosted FROM event WHERE event.event_name = 'HELLOOOO!!!' AND event.event_start_date = '2015-04-27 22:00:00' AND event.event_location = 'La Serrania' AND event_active GROUP BY event_name, event_start_date, event_location;

select is_set.event_name, is_set.event_start_date, is_set.event_location, is_set.tournament_name, is_set.round_number, is_set.round_of, is_set.match_number, is_set.set_seq, (submits.score IS NULL) as can_submit from is_set LEFT OUTER JOIN submits ON is_set.event_name = submits.event_name AND is_set.event_start_date = submits.event_start_date AND is_set.event_location = submits.event_location AND is_set.tournament_name = submits.tournament_name AND is_set.round_number = submits.round_number AND is_set.round_of = submits.round_of AND is_set.match_number = submits.match_number AND is_set.set_seq = submits.set_seq where is_set.tournament_name = 'Mortal Kombat X Qualifiers';

select is_set.event_name, is_set.event_start_date, is_set.event_location, is_set.tournament_name, is_set.round_number, is_set.round_of, is_set.match_number, is_set.set_seq, (submits.score IS NULL) as can_submit from is_set JOIN competes ON is_set.event_name = competes.event_name AND is_set.event_start_date = competes.event_start_date AND is_set.event_location = competes.event_location AND is_set.tournament_name = competes.tournament_name AND is_set.round_number = competes.round_number AND is_set.round_of = competes.round_of AND is_set.match_number = competes.match_number LEFT OUTER JOIN submits ON is_set.event_name = submits.event_name AND is_set.event_start_date = submits.event_start_date AND is_set.event_location = submits.event_location AND is_set.tournament_name = submits.tournament_name AND is_set.round_number = submits.round_number AND is_set.round_of = submits.round_of AND is_set.match_number = submits.match_number AND is_set.set_seq = submits.set_seq where is_set.tournament_name = 'Mortal Kombat X Qualifiers';

-- vvvvvvv Get the sets for a match where a user is scheduled to play
SELECT is_set.event_name, is_set.event_start_date, is_set.event_location, is_set.tournament_name, is_set.round_number, is_set.round_of, is_set.match_number, is_set.set_seq, competes.competitor_number, (submits.score IS NULL AND NOT is_set.set_completed) AS can_submit_score FROM is_set JOIN competes ON is_set.event_name = competes.event_name AND is_set.event_start_date = competes.event_start_date AND is_set.event_location = competes.event_location AND is_set.tournament_name = competes.tournament_name AND is_set.round_number = competes.round_number AND is_set.round_of = competes.round_of AND is_set.match_number = competes.match_number JOIN is_a ON is_a.event_name = competes.event_name AND is_a.event_start_date = competes.event_start_date AND is_a.event_location = competes.event_location AND is_a.tournament_name = competes.tournament_name AND is_a.competitor_number = competes.competitor_number LEFT OUTER JOIN submits ON submits.event_name = competes.event_name AND submits.event_start_date = competes.event_start_date AND submits.event_location = competes.event_location AND submits.tournament_name = competes.tournament_name AND submits.competitor_number = competes.competitor_number AND submits.round_number = competes.round_number AND submits.round_of = competes.round_of AND submits.match_number = competes.match_number AND submits.set_seq = is_set.set_seq WHERE is_set.event_name = 'Event 01' AND is_set.event_start_date = '2015-03-25 09:00:00' AND is_set.event_location = 'miradero' AND is_set.tournament_name = 'Mortal Kombat X Qualifiers' AND is_set.round_number = 1 AND is_set.round_of = 'Group' AND is_set.match_number = 1 AND is_a.customer_username = 'rapol';
-- ^^^^^^^ Get the sets for a match where a user is scheduled to play

-- vvvvvvv Get my matchups
-- Past matchups
SELECT match.event_name, match.event_start_date, match.event_location, match.tournament_name, match.round_number, match.round_of, match.match_number, tournament.is_team_based FROM match JOIN competes ON match.event_name = competes.event_name AND match.event_start_date = competes.event_start_date AND match.event_location = competes.event_location AND match.tournament_name = competes.tournament_name AND match.round_number = competes.round_number AND match.round_of = competes.round_of AND match.match_number = competes.match_number JOIN is_a ON is_a.event_name = competes.event_name AND is_a.event_start_date = competes.event_start_date AND is_a.event_location = competes.event_location AND is_a.tournament_name = competes.tournament_name AND is_a.competitor_number = competes.competitor_number JOIN tournament ON match.event_name = tournament.event_name AND match.event_start_date = tournament.event_start_date AND match.event_location = tournament.event_location AND match.tournament_name = tournament.tournament_name WHERE is_a.customer_username = 'rapol' AND match.match_completed;

-- Current matchups
SELECT match.event_name, match.event_start_date, match.event_location, match.tournament_name, match.round_number, match.round_of, match.match_number, tournament.is_team_based FROM match JOIN competes ON match.event_name = competes.event_name AND match.event_start_date = competes.event_start_date AND match.event_location = competes.event_location AND match.tournament_name = competes.tournament_name AND match.round_number = competes.round_number AND match.round_of = competes.round_of AND match.match_number = competes.match_number JOIN is_a ON is_a.event_name = competes.event_name AND is_a.event_start_date = competes.event_start_date AND is_a.event_location = competes.event_location AND is_a.tournament_name = competes.tournament_name AND is_a.competitor_number = competes.competitor_number JOIN tournament ON match.event_name = tournament.event_name AND match.event_start_date = tournament.event_start_date AND match.event_location = tournament.event_location AND match.tournament_name = tournament.tournament_name WHERE is_a.customer_username = 'papaluisre' AND NOT match.match_completed;

-- if not team_based
SELECT customer.customer_tag, customer.customer_profile_pic, sum(submits.score) AS score FROM customer JOIN is_a ON is_a.customer_username = customer.customer_username JOIN competes ON is_a.event_name = competes.event_name AND is_a.event_start_date = competes.event_start_date AND is_a.event_location = competes.event_location AND is_a.tournament_name = competes.tournament_name AND is_a.competitor_number = competes.competitor_number LEFT OUTER JOIN submits ON submits.event_name = competes.event_name AND submits.event_start_date = competes.event_start_date AND submits.event_location = competes.event_location AND submits.tournament_name = competes.tournament_name AND submits.competitor_number = competes.competitor_number AND submits.round_number = competes.round_number AND submits.round_of = competes.round_of AND submits.match_number = competes.match_number WHERE competes.event_name = 'Event 01' AND competes.event_start_date = '2015-03-25 09:00:00' AND competes.event_location = 'miradero' AND competes.tournament_name = 'Mortal Kombat X Qualifiers' AND competes.round_number = 1 AND competes.round_of = 'Group' AND competes.match_number = 1 GROUP BY customer.customer_tag, customer.customer_profile_pic;

-- else
SELECT team.team_name, team.team_logo, sum(submits.score) FROM team JOIN competes_for ON competes_for.team_name = team.team_name JOIN competes ON competes_for.event_name = competes.event_name AND competes_for.event_start_date = competes.event_start_date AND competes_for.event_location = competes.event_location AND competes_for.tournament_name = competes.tournament_name AND competes_for.competitor_number = competes.competitor_number LEFT OUTER JOIN submits ON submits.event_name = competes.event_name AND submits.event_start_date = competes.event_start_date AND submits.event_location = competes.event_location AND submits.tournament_name = competes.tournament_name AND submits.competitor_number = competes.competitor_number AND submits.round_number = competes.round_number AND submits.round_of = competes.round_of AND submits.match_number = competes.match_number WHERE competes.event_name = 'Event 01' AND competes.event_start_date = '2015-03-25 09:00:00' AND competes.event_location = 'miradero' AND competes.tournament_name = 'Mortal Kombat X Qualifiers' AND competes.round_number = 1 AND competes.round_of = 'Group' AND competes.match_number = 1 GROUP BY team.team_name, team.team_logo;
-- ^^^^^^^ Get my matchups

-- vvvvvvv Check if a user can submit score
SELECT is_a.competitor_number FROM customer JOIN is_a ON is_a.customer_username = customer.customer_username JOIN competes ON is_a.event_name = competes.event_name AND is_a.event_start_date = competes.event_start_date AND is_a.event_location = competes.event_location AND is_a.tournament_name = competes.tournament_name AND is_a.competitor_number = competes.competitor_number LEFT OUTER JOIN submits ON submits.event_name = competes.event_name AND submits.event_start_date = competes.event_start_date AND submits.event_location = competes.event_location AND submits.tournament_name = competes.tournament_name AND submits.competitor_number = competes.competitor_number AND submits.round_number = competes.round_number AND submits.round_of = competes.round_of AND submits.match_number = competes.match_number WHERE competes.event_name = 'Event 01' AND competes.event_start_date = '2015-03-25 09:00:00' AND competes.event_location = 'miradero' AND competes.tournament_name = 'Mortal Kombat X Qualifiers' AND competes.round_number = 1 AND competes.round_of = 'Group' AND competes.match_number = 1  AND customer.customer_username = 'ollidab' GROUP BY is_a.competitor_number;
-- ^^^^^^^ Check if a user can submit score

-- vvvvvvv Get opponent score
SELECT competes.competitor_number, submits.score FROM is_set JOIN competes ON is_set.event_name = competes.event_name AND is_set.event_start_date = competes.event_start_date AND is_set.event_location = competes.event_location AND is_set.tournament_name = competes.tournament_name AND is_set.round_number = competes.round_number AND is_set.round_of = competes.round_of AND is_set.match_number = competes.match_number JOIN is_a ON is_a.event_name = competes.event_name AND is_a.event_start_date = competes.event_start_date AND is_a.event_location = competes.event_location AND is_a.tournament_name = competes.tournament_name AND is_a.competitor_number = competes.competitor_number JOIN submits ON submits.event_name = competes.event_name AND submits.event_start_date = competes.event_start_date AND submits.event_location = competes.event_location AND submits.tournament_name = competes.tournament_name AND submits.competitor_number = competes.competitor_number AND submits.round_number = competes.round_number AND submits.round_of = competes.round_of AND submits.match_number = competes.match_number AND submits.set_seq = is_set.set_seq WHERE is_set.event_name = 'Event 01' AND is_set.event_start_date = '2015-03-25 09:00:00' AND is_set.event_location = 'miradero' AND is_set.tournament_name = 'Mortal Kombat X Qualifiers' AND is_set.round_number = 1 AND is_set.round_of = 'Group' AND is_set.match_number = 1 AND is_set.set_seq = 1 AND is_a.customer_username <> 'papaluisre';

SELECT competes.competitor_number, submits.score FROM is_set JOIN competes ON is_set.event_name = competes.event_name AND is_set.event_start_date = competes.event_start_date AND is_set.event_location = competes.event_location AND is_set.tournament_name = competes.tournament_name AND is_set.round_number = competes.round_number AND is_set.round_of = competes.round_of AND is_set.match_number = competes.match_number JOIN is_a ON is_a.event_name = competes.event_name AND is_a.event_start_date = competes.event_start_date AND is_a.event_location = competes.event_location AND is_a.tournament_name = competes.tournament_name AND is_a.competitor_number = competes.competitor_number JOIN submits ON submits.event_name = competes.event_name AND submits.event_start_date = competes.event_start_date AND submits.event_location = competes.event_location AND submits.tournament_name = competes.tournament_name AND submits.competitor_number = competes.competitor_number AND submits.round_number = competes.round_number AND submits.round_of = competes.round_of AND submits.match_number = competes.match_number AND submits.set_seq = is_set.set_seq WHERE is_set.event_name = $1 AND is_set.event_start_date = $2 AND is_set.event_location = $3 AND is_set.tournament_name = $4 AND is_set.round_number = $5 AND is_set.round_of = $6 AND is_set.match_number = $7 AND is_set.set_seq = $8 AND is_a.customer_username <> $9;
-- ^^^^^^^ Get opponent score

-- vvvvvvv Check if a match is complete
SELECT every(is_set.set_completed) as match_completed FROM is_set JOIN competes ON is_set.event_name = competes.event_name AND is_set.event_start_date = competes.event_start_date AND is_set.event_location = competes.event_location AND is_set.tournament_name = competes.tournament_name AND is_set.round_number = competes.round_number AND is_set.round_of = competes.round_of AND is_set.match_number = competes.match_number JOIN is_a ON is_a.event_name = competes.event_name AND is_a.event_start_date = competes.event_start_date AND is_a.event_location = competes.event_location AND is_a.tournament_name = competes.tournament_name AND is_a.competitor_number = competes.competitor_number WHERE is_set.event_name = 'Event 01' AND is_set.event_start_date = '2015-03-25 09:00:00' AND is_set.event_location = 'miradero' AND is_set.tournament_name = 'Mortal Kombat X Qualifiers' AND is_set.round_number = 1 AND is_set.round_of = 'Group' AND is_set.match_number = 1 AND is_a.customer_username = 'papaluisre';
-- ^^^^^^^ Check if a match is complete

-- vvvvvvv Get the resuls of a match
SELECT competes.competitor_number, sum(submits.score) AS score FROM competes LEFT OUTER JOIN submits ON submits.event_name = competes.event_name AND submits.event_start_date = competes.event_start_date AND submits.event_location = competes.event_location AND submits.tournament_name = competes.tournament_name AND submits.competitor_number = competes.competitor_number AND submits.round_number = competes.round_number AND submits.round_of = competes.round_of AND submits.match_number = competes.match_number WHERE competes.event_name = 'Event 01' AND competes.event_start_date = '2015-03-25 09:00:00' AND competes.event_location = 'miradero' AND competes.tournament_name = 'Mortal Kombat X Qualifiers' AND competes.round_number = 1 AND competes.round_of = 'Group' AND competes.match_number = 1 GROUP BY competes.competitor_number ORDER BY score DESC;
-- ^^^^^^^ Get the resuls of a match

SELECT future_round_number, future_round_of, future_match FROM competitor_goes_to WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers' AND past_round_number = 1 AND past_round_of = 'Winner' AND past_match = 1 AND NOT is_winner;

SELECT customer.customer_tag, customer.customer_profile_pic, sum(submits.score) AS score FROM customer JOIN is_a ON is_a.customer_username = customer.customer_username JOIN competes ON is_a.event_name = competes.event_name AND is_a.event_start_date = competes.event_start_date AND is_a.event_location = competes.event_location AND is_a.tournament_name = competes.tournament_name AND is_a.competitor_number = competes.competitor_number LEFT OUTER JOIN submits ON submits.event_name = competes.event_name AND submits.event_start_date = competes.event_start_date AND submits.event_location = competes.event_location AND submits.tournament_name = competes.tournament_name AND submits.competitor_number = competes.competitor_number AND submits.round_number = competes.round_number AND submits.round_of = competes.round_of AND submits.match_number = competes.match_number WHERE competes.event_name = 'Event 01' AND competes.event_start_date = '2015-03-25 09:00:00' AND competes.event_location = 'miradero' AND competes.tournament_name = 'Mortal Kombat X Qualifiers' AND competes.round_number = 1 AND competes.round_of = 'Group' AND competes.match_number = 1 GROUP BY customer.customer_tag, customer.customer_profile_pic;

SELECT every(is_set.set_completed) as match_completed, sum(submits.score) FROM is_set JOIN competes ON is_set.event_name = competes.event_name AND is_set.event_start_date = competes.event_start_date AND is_set.event_location = competes.event_location AND is_set.tournament_name = competes.tournament_name AND is_set.round_number = competes.round_number AND is_set.round_of = competes.round_of AND is_set.match_number = competes.match_number JOIN is_a ON is_a.event_name = competes.event_name AND is_a.event_start_date = competes.event_start_date AND is_a.event_location = competes.event_location AND is_a.tournament_name = competes.tournament_name AND is_a.competitor_number = competes.competitor_number LEFT OUTER JOIN submits ON submits.event_name = competes.event_name AND submits.event_start_date = competes.event_start_date AND submits.event_location = competes.event_location AND submits.tournament_name = competes.tournament_name AND submits.competitor_number = competes.competitor_number AND submits.round_number = competes.round_number AND submits.round_of = competes.round_of AND submits.match_number = competes.match_number WHERE is_set.event_name = 'Event 01' AND is_set.event_start_date = '2015-03-25 09:00:00' AND is_set.event_location = 'miradero' AND is_set.tournament_name = 'Mortal Kombat X Qualifiers' AND is_set.round_number = 1 AND is_set.round_of = 'Group' AND is_set.match_number = 1 AND is_a.customer_username = 'papaluisre';

SELECT every(match.match_completed) as round_completed FROM match JOIN competes ON match.event_name = competes.event_name AND match.event_start_date = competes.event_start_date AND match.event_location = competes.event_location AND match.tournament_name = competes.tournament_name AND match.round_number = competes.round_number AND match.round_of = competes.round_of AND match.match_number = competes.match_number JOIN is_a ON is_a.event_name = competes.event_name AND is_a.event_start_date = competes.event_start_date AND is_a.event_location = competes.event_location AND is_a.tournament_name = competes.tournament_name AND is_a.competitor_number = competes.competitor_number WHERE match.event_name = 'Event 01' AND match.event_start_date = '2015-03-25 09:00:00' AND match.event_location = 'miradero' AND match.tournament_name = 'Mortal Kombat X Qualifiers' AND match.round_number = 1 AND match.round_of = 'Group' AND match.match_number = 1 AND is_a.customer_username = 'papaluisre';

SELECT every(match_completed) AS round_completed FROM match WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers' AND round_number = 1 AND round_of = 'Group';


SELECT sum(submits.score) AS score FROM is_set JOIN competes ON is_set.event_name = competes.event_name AND is_set.event_start_date = competes.event_start_date AND is_set.event_location = competes.event_location AND is_set.tournament_name = competes.tournament_name AND is_set.round_number = competes.round_number AND is_set.round_of = competes.round_of AND is_set.match_number = competes.match_number JOIN is_a ON is_a.event_name = competes.event_name AND is_a.event_start_date = competes.event_start_date AND is_a.event_location = competes.event_location AND is_a.tournament_name = competes.tournament_name AND is_a.competitor_number = competes.competitor_number JOIN submits ON submits.event_name = competes.event_name AND submits.event_start_date = competes.event_start_date AND submits.event_location = competes.event_location AND submits.tournament_name = competes.tournament_name AND submits.competitor_number = competes.competitor_number AND submits.round_number = competes.round_number AND submits.round_of = competes.round_of AND submits.match_number = competes.match_number AND submits.set_seq = is_set.set_seq WHERE is_set.event_name = 'Event 01' AND is_set.event_start_date = '2015-03-25 09:00:00' AND is_set.event_location = 'miradero' AND is_set.tournament_name = 'Mortal Kombat X Qualifiers' AND is_set.round_number = 1 AND is_set.round_of = 'Group' AND is_set.match_number = 1 GROUP BY competes.competitor_number;

SELECT score_type, number_of_people_per_group, amount_of_winners_per_group, round_best_of FROM event NATURAL JOIN tournament NATURAL JOIN round WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers' AND round_number = 1 AND round_of = 'Group' AND event_active;

http://127.0.0.1:5000/matchup/profile/matchups

http://127.0.0.1:5000/matchup/events/Event 01/tournaments/Mortal Kombat X Qualifiers/rounds/2/matches/1/1?date=2015-03-25 09:00:00&location=miradero&station=1&round_of=Group

papaluisre
eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VybmFtZSI6InBhcGFsdWlzcmUiLCJpYXQiOjE0Mjg5NTY2NzB9.vczR1Wq-jkHmq1_ckddrgyynD-vIoZ5mxj3dPSdIm7Q

rapol
eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VybmFtZSI6InJhcG9sIiwiaWF0IjoxNDI4OTU3OTI4fQ.oG_PAGYluugXoU9LzYR2L8bvO0drgkleB6REoqL9vBs

SELECT round_number, round_of, match_number FROM match WHERE (concat(round_number, round_of, match_number) NOT IN (SELECT concat(round_number, round_of, match_number) FROM is_played_in WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers')) AND (concat(round_number, round_of, match_number, 2) IN (SELECT concat(round_number, round_of, match_number,count(concat(round_number, round_of, match_number))) FROM competes WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers' GROUP BY round_number, round_of, match_number)) AND event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers' ORDER BY round_number, CASE WHEN round_of = 'Group' THEN 1 WHEN round_of = 'Round Robin' THEN 2 WHEN round_of = 'Winner' THEN 3 WHEN round_of = 'Loser' THEN 4 END LIMIT 1;

SELECT score_type, number_of_people_per_group, amount_of_winners_per_group, round_best_of, tournament_format, station_number FROM event NATURAL JOIN tournament NATURAL JOIN round NATURAL JOIN match LEFT OUTER JOIN is_played_in ON match.event_name = is_played_in.event_name AND match.event_start_date = is_played_in.event_start_date AND match.event_location = is_played_in.event_location AND match.tournament_name =is_played_in.tournament_name AND match.round_number = is_played_in.round_number AND match.round_of = is_played_in.round_of AND match.match_number = is_played_in.match_number WHERE match.event_name = 'Event 01' AND match.event_start_date = '2015-03-25 09:00:00' AND match.event_location = 'miradero' AND match.tournament_name = 'Mortal Kombat X Qualifiers' AND match.round_number = 1 AND match.round_of = 'Group' AND match.match_number = 1 AND event.event_active;

-- Get the finalists of a winners bracket
SELECT competes.competitor_number, sum(submits.score) AS score FROM competes JOIN submits ON submits.event_name = competes.event_name AND submits.event_start_date = competes.event_start_date AND submits.event_location = competes.event_location AND submits.tournament_name = competes.tournament_name AND submits.competitor_number = competes.competitor_number AND submits.round_number = competes.round_number AND submits.round_of = competes.round_of AND submits.match_number = competes.match_number JOIN competitor ON competitor.event_name = competes.event_name AND competitor.event_start_date = competes.event_start_date AND competitor.event_location = competes.event_location AND competitor.tournament_name = competes.tournament_name AND competitor.competitor_number = competes.competitor_number WHERE competes.event_name = $1 AND competes.event_start_date = $2 AND competes.event_location = $3 AND competes.tournament_name = $4 AND competes.round_of = 'Winner' AND competes.round_number = (SELECT max(round_number) FROM round WHERE round_of = 'Winner' AND event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4) GROUP BY competes.competitor_number, competitor.matches_lost ORDER BY score DESC

SELECT competes.competitor_number, sum(submits.score) AS score FROM competes JOIN submits ON submits.event_name = competes.event_name AND submits.event_start_date = competes.event_start_date AND submits.event_location = competes.event_location AND submits.tournament_name = competes.tournament_name AND submits.competitor_number = competes.competitor_number AND submits.round_number = competes.round_number AND submits.round_of = competes.round_of AND submits.match_number = competes.match_number JOIN competitor ON competitor.event_name = competes.event_name AND competitor.event_start_date = competes.event_start_date AND competitor.event_location = competes.event_location AND competitor.tournament_name = competes.tournament_name AND competitor.competitor_number = competes.competitor_number WHERE competes.event_name = 'Event 01' AND competes.event_start_date = '2015-03-25 09:00:00'  AND competes.event_location = 'miradero' AND competes.tournament_name = 'Ultra Street Fighter IV Qualifiers' AND competes.round_of = 'Winner' AND competes.round_number = (SELECT max(round_number) FROM round WHERE round_of = 'Winner' AND event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00'  AND event_location = 'miradero' AND tournament_name = 'Ultra Street Fighter IV Qualifiers') GROUP BY competes.competitor_number, competitor.matches_lost ORDER BY score DESC;

-- Get the losers of a round
	-- competitor_goes_to.future_round_number should always be equal to the current round +1
SELECT competes.competitor_number FROM competes WHERE competes.event_name = 'Event 01' AND competes.event_start_date = '2015-03-25 09:00:00' AND competes.event_location = 'miradero' AND competes.tournament_name = 'Ultra Street Fighter IV Qualifiers' AND competes.round_of = 'Winner' AND competes.round_number = 2 AND (competes.competitor_number NOT IN (SELECT competitor_number FROM competes JOIN competitor_goes_to ON competes.event_name = competitor_goes_to.event_name AND competes.event_start_date = competitor_goes_to.event_start_date AND competes.event_location = competitor_goes_to.event_location AND competes.tournament_name = competitor_goes_to.tournament_name AND competes.round_number = competitor_goes_to.future_round_number AND competes.round_of = competitor_goes_to.future_round_of AND competes.match_number = competitor_goes_to.future_match WHERE competitor_goes_to.is_winner AND competitor_goes_to.future_round_number = 3)) ORDER BY competes.round_number DESC, competes.match_number;

SELECT round.round_number FROM round WHERE round.event_name = $1 AND round.event_start_date = $2 AND round.event_location = $3 AND round.tournament_name = $4 AND round.round_of = $5 AND round.round_number <> (SELECT max(round_number) FROM round WHERE round_of = $5 AND event_name = $1 AND event_start_date = $2  AND event_location = $3 AND tournament_name = $4) ORDER BY round.round_number DESC;

SELECT competitor_number FROM competitor NATURAL JOIN competes WHERE event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4 AND round_of = $5 ORDER BY matches_won DESC, competitor_seed ASC

SELECT distinct customer.customer_username, customer.customer_first_name, customer.customer_last_name, customer.customer_tag, customer.customer_profile_pic, tournament.competitor_fee, competitor.competitor_check_in, competitor.competitor_seed, competitor.competitor_number FROM tournament JOIN is_a ON is_a.event_name = tournament.event_name AND is_a.event_start_date = tournament.event_start_date AND is_a.event_location = tournament.event_location AND is_a.tournament_name = tournament.tournament_name JOIN competitor ON is_a.event_name = competitor.event_name AND is_a.event_start_date = competitor.event_start_date AND is_a.event_location = competitor.event_location AND is_a.tournament_name = competitor.tournament_name AND is_a.competitor_number = competitor.competitor_number JOIN customer ON customer.customer_username = is_a.customer_username WHERE tournament.event_name = $1 AND tournament.event_start_date = $2 AND tournament.event_location = $3 AND tournament.tournament_name = $4 ORDER BY competitor.competitor_seed

SELECT distinct customer.customer_username, event.event_end_date FROM event JOIN is_a ON is_a.event_name = event.event_name AND is_a.event_start_date = event.event_start_date AND is_a.event_location = event.event_location JOIN customer ON customer.customer_username = is_a.customer_username WHERE event.event_name = 'Event 06' AND event.event_start_date = '2015-10-29 09:00:00' AND event.event_location = '1234 Calle Paloma, Mayaguez, PR 00681-9042' AND event.event_active;

SELECT distinct customer.customer_username, event.event_end_date FROM is_a JOIN event ON is_a.event_name = event.event_name AND is_a.event_start_date = event.event_start_date AND is_a.event_location = event.event_location JOIN pays ON pays.event_name = event.event_name AND pays.event_start_date = event.event_start_date AND pays.event_location = event.event_location JOIN hosts ON hosts.event_name = event.event_name AND hosts.event_start_date = event.event_start_date AND hosts.event_location = event.event_location JOIN belongs_to ON belongs_to.organization_name = hosts.organization_name JOIN customer ON customer.customer_username = pays.customer_username OR customer.customer_username = is_a.customer_username OR customer.customer_username = event.customer_username OR customer.customer_username = belongs_to.customer_username WHERE event.event_name = $1 AND event.event_start_date = $2 AND event.event_location = $3 AND customer.customer_username = $4 AND event.event_active

-- Can create meetup? [UPDATED]
SELECT distinct customer.customer_username, event.event_end_date FROM event JOIN hosts ON hosts.event_name = event.event_name AND hosts.event_start_date = event.event_start_date AND hosts.event_location = event.event_location JOIN belongs_to ON belongs_to.organization_name = hosts.organization_name LEFT OUTER JOIN is_a ON is_a.event_name = event.event_name AND is_a.event_start_date = event.event_start_date AND is_a.event_location = event.event_location LEFT OUTER JOIN pays ON pays.event_name = event.event_name AND pays.event_start_date = event.event_start_date AND pays.event_location = event.event_location LEFT OUTER JOIN customer ON customer.customer_username = is_a.customer_username OR customer.customer_username = pays.customer_username OR customer.customer_username = belongs_to.customer_username WHERE event.event_name = 'Event 06' AND event.event_start_date = '2015-10-29 09:00:00' AND event.event_location = '1234 Calle Paloma, Mayaguez, PR 00681-9042' AND customer.customer_username = 'test02' AND event.event_active;

-- Can delete meetup? [UPDATED]
SELECT distinct customer.customer_username, event.event_end_date FROM event JOIN hosts ON hosts.event_name = event.event_name AND hosts.event_start_date = event.event_start_date AND hosts.event_location = event.event_location JOIN belongs_to ON belongs_to.organization_name = hosts.organization_name LEFT OUTER JOIN meetup ON meetup.event_name = event.event_name AND meetup.event_start_date = event.event_start_date AND meetup.event_location = event.event_location LEFT OUTER JOIN customer ON customer.customer_username = meetup.customer_username OR customer.customer_username = belongs_to.customer_username WHERE event.event_name = 'Event 06' AND event.event_start_date = '2015-10-29 09:00:00' AND event.event_location = '1234 Calle Paloma, Mayaguez, PR 00681-9042' AND customer.customer_username = 'test02' AND event.event_active;

-- Can create review? [UPDATED]
SELECT distinct customer.customer_username FROM event LEFT OUTER JOIN is_a ON is_a.event_name = event.event_name AND is_a.event_start_date = event.event_start_date AND is_a.event_location = event.event_location LEFT OUTER JOIN pays ON pays.event_name = event.event_name AND pays.event_start_date = event.event_start_date AND pays.event_location = event.event_location LEFT OUTER JOIN customer ON customer.customer_username = pays.customer_username OR customer.customer_username = is_a.customer_username WHERE event.event_name = 'Event 06' AND event.event_start_date = '2015-10-29 09:00:00' AND event.event_location = '1234 Calle Paloma, Mayaguez, PR 00681-9042' AND customer.customer_username = 'test02' AND event.event_active;

SELECT distinct customer.customer_username FROM is_a JOIN pays ON pays.event_name = is_a.event_name AND pays.event_start_date = is_a.event_start_date AND pays.event_location = is_a.event_location AND is_a.customer_username = pays.customer_username WHERE event.event_name = 'Event 06' AND event.event_start_date = '2015-10-29 09:00:00' AND event.event_location = '1234 Calle Paloma, Mayaguez, PR 00681-9042' AND event.event_active;

SELECT distinct customer.customer_username, event.event_end_date FROM event JOIN pays ON pays.event_name = event.event_name AND pays.event_start_date = event.event_start_date AND pays.event_location = event.event_location JOIN customer ON customer.customer_username = pays.customer_username WHERE event.event_name = 'Event 06' AND event.event_start_date = '2015-10-29 09:00:00' AND event.event_location = '1234 Calle Paloma, Mayaguez, PR 00681-9042' AND event.event_active;

SELECT distinct customer.customer_username, event.event_end_date FROM event JOIN hosts ON hosts.event_name = event.event_name AND hosts.event_start_date = event.event_start_date AND hosts.event_location = event.event_location JOIN belongs_to ON hosts.organization_name = belongs_to.organization_name JOIN customer ON customer.customer_username = belongs_to.customer_username WHERE event.event_name = 'Event 06' AND event.event_start_date = '2015-10-29 09:00:00' AND event.event_location = '1234 Calle Paloma, Mayaguez, PR 00681-9042' AND event.event_active;

SELECT distinct is_a.customer_username, pays.customer_username, belongs_to.customer_username, event.event_end_date FROM event JOIN is_a ON is_a.event_name = event.event_name AND is_a.event_start_date = event.event_start_date AND is_a.event_location = event.event_location JOIN pays ON pays.event_name = event.event_name AND pays.event_start_date = event.event_start_date AND pays.event_location = event.event_location JOIN hosts ON hosts.event_name = event.event_name AND hosts.event_start_date = event.event_start_date AND hosts.event_location = event.event_location JOIN belongs_to ON hosts.organization_name = belongs_to.organization_name WHERE event.event_name = 'Event 06' AND event.event_start_date = '2015-10-29 09:00:00' AND event.event_location = '1234 Calle Paloma, Mayaguez, PR 00681-9042' AND event.event_active;

SELECT distinct event.event_end_date FROM event JOIN is_a ON is_a.event_name = event.event_name AND is_a.event_start_date = event.event_start_date AND is_a.event_location = event.event_location JOIN pays ON pays.event_name = event.event_name AND pays.event_start_date = event.event_start_date AND pays.event_location = event.event_location JOIN hosts ON hosts.event_name = event.event_name AND hosts.event_start_date = event.event_start_date AND hosts.event_location = event.event_location JOIN belongs_to ON belongs_to.organization_name = hosts.organization_name JOIN customer ON customer.customer_username = pays.customer_username OR customer.customer_username = is_a.customer_username OR customer.customer_username = event.customer_username OR customer.customer_username = belongs_to.customer_username WHERE event.event_name = 'Event 01' AND event.event_start_date = '2015-03-25 09:00:00' AND event.event_location = 'miradero' AND customer.customer_username = 'papaluisre' AND event.event_active;

SELECT customer_username FROM customer WHERE (customer_username IN (SELECT is_a.customer_username FROM is_a JOIN event ON is_a.event_name = event.event_name AND is_a.event_start_date = event.event_start_date AND is_a.event_location = event.event_location WHERE event.event_name = 'Event 01' AND event.event_start_date = '2015-03-25 09:00:00' AND event.event_location = 'miradero' AND event.event_active) OR customer_username IN (SELECT pays.customer_username FROM pays JOIN event ON pays.event_name = event.event_name AND pays.event_start_date = event.event_start_date AND pays.event_location = event.event_location WHERE event.event_name = 'Event 01' AND event.event_start_date = '2015-03-25 09:00:00' AND event.event_location = 'miradero' AND event.event_active) OR customer_username IN (SELECT belongs_to.customer_username FROM belongs_to JOIN hosts ON belongs_to.organization_name = hosts.organization_name JOIN event ON hosts.event_name = event.event_name AND hosts.event_start_date = event.event_start_date AND hosts.event_location = event.event_location WHERE event.event_name = 'Event 01' AND event.event_start_date = '2015-03-25 09:00:00' AND event.event_location = 'miradero' AND event.event_active)) AND customer_username = 'papaluisre';

SELECT distinct customer.customer_username, event.event_end_date FROM event JOIN is_a ON is_a.event_name = event.event_name AND is_a.event_start_date = event.event_start_date AND is_a.event_location = event.event_location JOIN pays ON pays.event_name = event.event_name AND pays.event_start_date = event.event_start_date AND pays.event_location = event.event_location JOIN hosts ON hosts.event_name = event.event_name AND hosts.event_start_date = event.event_start_date AND hosts.event_location = event.event_location JOIN customer ON customer.customer_username = pays.customer_username OR customer.customer_username = is_a.customer_username WHERE event.event_name = 'Event 06' AND event.event_start_date = '2015-10-29 09:00:00' AND event.event_location = '1234 Calle Paloma, Mayaguez, PR 00681-9042' AND customer.customer_username = 'test02' AND event.event_active

Event 04                 | 2025-10-19 09:00:00 | Calle Bosque, Mayaguez, PR 00681-9042 

  SELECT max(station_number)+1 AS next_station FROM station WHERE event_name = 'Event 04' AND event_start_date = '2025-10-19 09:00:00' AND event_location = 'Calle Bosque, Mayaguez, PR 00681-9042';

  Event 09   | 2015-11-02 09:00:00 | 41 Independence BLV, Warren, NJ

-- FUCKING GROUP STAGE STANDINGS BECAUSE FUCK ALL YALL NIGGAS
 SELECT customer.customer_username, customer.customer_profile_pic, customer.customer_tag, has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) AS wins, CASE WHEN has_a.group_number = (SELECT count(*) FROM "group" WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers') THEN ((SELECT count(*) FROM is_a WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers') % tournament.number_of_people_per_group - 1) - sum(submits.score)/((round.round_best_of/2)+1) ELSE (tournament.number_of_people_per_group - 1) - sum(submits.score)/((round.round_best_of/2)+1) END AS loses, CASE WHEN row_number() OVER(ORDER BY has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) DESC, competitor.competitor_seed) % (tournament.number_of_people_per_group) = 0 THEN row_number() OVER(ORDER BY has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) DESC) % (tournament.number_of_people_per_group + 1) ELSE row_number() OVER(ORDER BY has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) DESC) % (tournament.number_of_people_per_group) END AS standing, (CASE WHEN row_number() OVER(ORDER BY has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) DESC, competitor.competitor_seed) % (tournament.number_of_people_per_group) = 0 THEN row_number() OVER(ORDER BY has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) DESC) % (tournament.number_of_people_per_group + 1) ELSE row_number() OVER(ORDER BY has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) DESC) % (tournament.number_of_people_per_group) END <= tournament.amount_of_winners_per_group) AS advanced FROM submits JOIN competes ON submits.event_name = competes.event_name AND submits.event_start_date = competes.event_start_date AND submits.event_location = competes.event_location AND submits.tournament_name = competes.tournament_name AND submits.round_of = competes.round_of AND submits.round_number = competes.round_number AND submits.competitor_number = competes.competitor_number JOIN round ON submits.event_name = round.event_name AND submits.event_start_date = round.event_start_date AND submits.event_location = round.event_location AND submits.tournament_name = round.tournament_name AND submits.round_of = round.round_of AND submits.round_number = round.round_number JOIN competitor ON competitor.event_name = competes.event_name AND competitor.event_start_date = competes.event_start_date AND competitor.event_location = competes.event_location AND competitor.tournament_name = competes.tournament_name AND competitor.competitor_number = competes.competitor_number JOIN has_a ON has_a.event_name = competes.event_name AND has_a.event_start_date = competes.event_start_date AND has_a.event_location = competes.event_location AND has_a.tournament_name = competes.tournament_name AND has_a.round_number = competes.round_number AND has_a.round_of = competes.round_of AND has_a.match_number = competes.match_number JOIN tournament ON submits.event_name = tournament.event_name AND submits.event_start_date = tournament.event_start_date AND submits.event_location = tournament.event_location AND submits.tournament_name = tournament.tournament_name JOIN is_a ON is_a.event_name = competitor.event_name AND is_a.event_start_date = competitor.event_start_date AND is_a.event_location = competitor.event_location AND is_a.tournament_name = competitor.tournament_name AND is_a.competitor_number = competitor.competitor_number JOIN customer ON customer.customer_username = is_a.customer_username WHERE competes.event_name = 'Event 01' AND competes.event_start_date = '2015-03-25 09:00:00' AND competes.event_location = 'miradero' AND competes.tournament_name = 'Mortal Kombat X Qualifiers' AND competes.round_of = 'Group' GROUP BY customer.customer_username, customer.customer_tag, customer.customer_profile_pic, round.round_best_of, has_a.group_number, competitor.competitor_seed, tournament.number_of_people_per_group, tournament.amount_of_winners_per_group ORDER BY has_a.group_number, wins DESC, competitor.competitor_seed, standing;

-- Standings for Final stage
SELECT customer.customer_username, customer.customer_profile_pic, customer.customer_tag, competitor.competitor_standing AS standing FROM competitor JOIN is_a ON is_a.event_name = competitor.event_name AND is_a.event_start_date = competitor.event_start_date AND is_a.event_location = competitor.event_location AND is_a.tournament_name = competitor.tournament_name AND is_a.competitor_number = competitor.competitor_number JOIN tournament ON competitor.event_name = tournament.event_name AND competitor.event_start_date = tournament.event_start_date AND competitor.event_location = tournament.event_location AND competitor.tournament_name = tournament.tournament_name JOIN customer ON customer.customer_username = is_a.customer_username WHERE is_a.event_name = 'Event 01' AND is_a.event_start_date = '2015-03-25 09:00:00' AND is_a.event_location = 'miradero' AND is_a.tournament_name = 'Mortal Kombat X Qualifiers' AND competitor.competitor_standing > 0 ORDER BY standing;

SELECT CASE WHEN tournament.team_size > 1 THEN team.team_name || ',;!;,' || team.team_logo ELSE customer.customer_username || ',;!;,' || customer.customer_profile_pic || ',;!;,' || customer.customer_tag END AS info, competitor.competitor_number, competitor.competitor_standing AS standing FROM competitor JOIN tournament ON competitor.event_name = tournament.event_name AND competitor.event_start_date = tournament.event_start_date AND competitor.event_location = tournament.event_location AND competitor.tournament_name = tournament.tournament_name JOIN is_a ON is_a.event_name = competitor.event_name AND is_a.event_start_date = competitor.event_start_date AND is_a.event_location = competitor.event_location AND is_a.tournament_name = competitor.tournament_name AND is_a.competitor_number = competitor.competitor_number JOIN customer ON customer.customer_username = is_a.customer_username LEFT OUTER JOIN competes_for ON competes_for.event_name = competitor.event_name AND competes_for.event_start_date = competitor.event_start_date AND competes_for.event_location = competitor.event_location AND competes_for.tournament_name = competitor.tournament_name AND competes_for.competitor_number = competitor.competitor_number LEFT OUTER JOIN team ON team.team_name = competes_for.team_name WHERE tournament.event_name = 'Event 01' AND tournament.event_start_date = '2015-03-25 09:00:00' AND tournament.event_location = 'miradero' AND tournament.tournament_name = 'Mortal Kombat X Qualifiers' AND competitor.competitor_standing > 0 GROUP BY tournament.team_size, team.team_name, team.team_logo, customer.customer_username, customer.customer_profile_pic, customer.customer_tag, competitor.competitor_number, competitor.competitor_standing ORDER BY standing;

SELECT CASE WHEN tournament.team_size > 1 THEN team.team_name END, CASE WHEN tournament.team_size > 1 THEN team.team_logo END, CASE WHEN tournament.team_size = 1 THEN customer.customer_username END, CASE WHEN tournament.team_size = 1 THEN customer.customer_profile_pic END, CASE WHEN tournament.team_size = 1 THEN customer.customer_tag END, competitor.competitor_number, competitor.competitor_standing AS standing FROM competitor JOIN tournament ON competitor.event_name = tournament.event_name AND competitor.event_start_date = tournament.event_start_date AND competitor.event_location = tournament.event_location AND competitor.tournament_name = tournament.tournament_name JOIN is_a ON is_a.event_name = competitor.event_name AND is_a.event_start_date = competitor.event_start_date AND is_a.event_location = competitor.event_location AND is_a.tournament_name = competitor.tournament_name AND is_a.competitor_number = competitor.competitor_number JOIN customer ON customer.customer_username = is_a.customer_username LEFT OUTER JOIN competes_for ON competes_for.event_name = competitor.event_name AND competes_for.event_start_date = competitor.event_start_date AND competes_for.event_location = competitor.event_location AND competes_for.tournament_name = competitor.tournament_name AND competes_for.competitor_number = competitor.competitor_number LEFT OUTER JOIN team ON team.team_name = competes_for.team_name WHERE is_a.event_name = 'Event 01' AND is_a.event_start_date = '2015-03-25 09:00:00' AND is_a.event_location = 'miradero' AND is_a.tournament_name = 'Mortal Kombat X Qualifiers' AND competitor.competitor_standing > 0 GROUP BY tournament.team_size, team.team_name, team.team_logo, customer.customer_username, customer.customer_profile_pic, customer.customer_tag, competitor.competitor_number, competitor.competitor_standing ORDER BY standing;


-- Get Round and Match details
SELECT match.round_number, match.round_of, match.match_number, match.match_completed, customer.customer_username,customer.customer_tag, customer.customer_profile_pic, sum(submits.score) AS score, has_a.group_number FROM match LEFT OUTER JOIN competes ON match.event_name = competes.event_name AND match.event_start_date = competes.event_start_date AND match.event_location = competes.event_location AND match.tournament_name = competes.tournament_name AND competes.round_number = match.round_number AND competes.round_of = match.round_of AND competes.match_number = match.match_number LEFT OUTER JOIN submits ON submits.event_name = competes.event_name AND submits.event_start_date = competes.event_start_date AND submits.event_location = competes.event_location AND submits.tournament_name = competes.tournament_name AND submits.competitor_number = competes.competitor_number AND submits.round_number = competes.round_number AND submits.round_of = competes.round_of AND submits.match_number = competes.match_number LEFT OUTER JOIN is_a ON is_a.event_name = competes.event_name AND is_a.event_start_date = competes.event_start_date AND is_a.event_location = competes.event_location AND is_a.tournament_name = competes.tournament_name AND competes.competitor_number = is_a.competitor_number LEFT OUTER JOIN customer ON is_a.customer_username = customer.customer_username LEFT OUTER JOIN competitor ON competitor.event_name = competes.event_name AND competitor.event_start_date = competes.event_start_date AND competitor.event_location = competes.event_location AND competitor.tournament_name = competes.tournament_name AND competitor.competitor_number = competes.competitor_number LEFT OUTER JOIN has_a ON match.event_name = has_a.event_name AND match.event_start_date = has_a.event_start_date AND match.event_location = has_a.event_location AND match.tournament_name = has_a.tournament_name AND has_a.round_number = match.round_number AND has_a.round_of = match.round_of AND has_a.match_number = match.match_number WHERE match.event_name = 'Event 01' AND match.event_start_date = '2015-03-25 09:00:00' AND match.event_location = 'miradero' AND match.tournament_name = 'Mortal Kombat X Qualifiers' GROUP BY match.round_number, match.round_of, match.match_number, match.match_completed, customer.customer_tag, customer.customer_profile_pic, customer.customer_username, competitor.competitor_seed, has_a.group_number ORDER BY CASE WHEN match.round_of = 'Group' THEN 1 WHEN match.round_of = 'Round Robin' THEN 2 WHEN match.round_of = 'Winner' THEN 3 WHEN match.round_of = 'Loser' THEN 4 END, match.round_number, match.match_number, competitor.competitor_seed;

-- Get all customer standings
SELECT event_name, event_start_date, event_location, tournament_name, competitor_standing AS standing FROM competitor NATURAL JOIN is_a WHERE customer_username = 'rapol' AND competitor_standing > 0;

-- Get all team standings
SELECT event_name, event_start_date, event_location, tournament_name, competitor_standing AS standing FROM competitor NATURAL JOIN competes_for WHERE team_name = 'NeptunoLabs' AND competitor_standing > 0;

-- Get the details of a match
	-- First part, Get the competitors of that match
SELECT customer.customer_username, (customer.customer_username = 'papaluisre') AS is_competitor, customer.customer_tag, customer.customer_profile_pic, sum(submits.score) AS score, match.match_completed FROM customer JOIN is_a ON is_a.customer_username = customer.customer_username LEFT OUTER JOIN competes ON is_a.event_name = competes.event_name AND is_a.event_start_date = competes.event_start_date AND is_a.event_location = competes.event_location AND is_a.tournament_name = competes.tournament_name AND is_a.competitor_number = competes.competitor_number LEFT OUTER JOIN submits ON submits.event_name = competes.event_name AND submits.event_start_date = competes.event_start_date AND submits.event_location = competes.event_location AND submits.tournament_name = competes.tournament_name AND submits.competitor_number = competes.competitor_number AND submits.round_number = competes.round_number AND submits.round_of = competes.round_of AND submits.match_number = competes.match_number LEFT OUTER JOIN match ON match.event_name = competes.event_name AND match.event_start_date = competes.event_start_date AND match.event_location = competes.event_location AND match.tournament_name = competes.tournament_name AND match.round_number = competes.round_number AND match.round_of = competes.round_of AND match.match_number = competes.match_number WHERE competes.event_name = 'Event 01' AND competes.event_start_date = '2015-03-25 09:00:00' AND competes.event_location = 'miradero' AND competes.tournament_name = 'Mortal Kombat X Qualifiers' AND competes.round_number = 1 AND competes.round_of = 'Group' AND competes.match_number = 1 GROUP BY customer.customer_username, customer.customer_tag, customer.customer_profile_pic, match.match_completed;

-- Second part, get the information for the sets
SELECT customer.customer_username, is_set.set_seq, is_set.set_completed, submits.score AS score FROM is_set JOIN match ON is_set.event_name = match.event_name AND is_set.event_start_date = match.event_start_date AND is_set.event_location = match.event_location AND is_set.tournament_name = match.tournament_name AND is_set.round_number = match.round_number AND is_set.round_of = match.round_of AND is_set.match_number = match.match_number LEFT OUTER JOIN submits ON submits.event_name = is_set.event_name AND submits.event_start_date = is_set.event_start_date AND submits.event_location = is_set.event_location AND submits.tournament_name = is_set.tournament_name AND submits.round_number = is_set.round_number AND submits.round_of = is_set.round_of AND submits.match_number = is_set.match_number AND submits.set_seq = is_set.set_seq LEFT OUTER JOIN competes ON is_set.event_name = competes.event_name AND is_set.event_start_date = competes.event_start_date AND is_set.event_location = competes.event_location AND is_set.tournament_name = competes.tournament_name AND competes.round_number = is_set.round_number AND competes.round_of = is_set.round_of AND competes.match_number = is_set.match_number AND submits.competitor_number = competes.competitor_number LEFT OUTER JOIN is_a ON is_a.competitor_number = competes.competitor_number AND is_a.event_name = is_set.event_name AND is_a.event_start_date = is_set.event_start_date AND is_a.event_location = is_set.event_location AND is_a.tournament_name = is_set.tournament_name LEFT OUTER JOIN customer ON customer.customer_username = is_a.customer_username WHERE is_set.event_name = 'Event 01' AND is_set.event_start_date = '2015-03-25 09:00:00' AND is_set.event_location = 'miradero' AND is_set.tournament_name = 'Mortal Kombat X Qualifiers' AND is_set.round_number = 1 AND is_set.round_of = 'Group' AND is_set.match_number = 1;

-- Register in a Tournament
	-- First part, get all the necessary info
SELECT competitor_fee, team_size, tournament_max_capacity AS max_capacity, ('test02' IN (SELECT customer_username FROM is_a WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers')) AS is_competitor, (SELECT count(*) FROM is_a WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers') AS registered_competitors FROM tournament NATURAL JOIN event WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers' AND event_active AND tournament_active
-- The rest are simple inserts

-- Get checked in competitors
SELECT customer_username, customer_tag, customer_profile_pic, competitor_number FROM customer NATURAL JOIN is_a NATURAL JOIN competitor WHERE event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4 AND competitor_check_in

-- Count all checked in competitors
SELECT count(*) FROM tournament NATURAL JOIN event NATURAL JOIN competitor WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Super Smash Bros. Melee Qualifiers' AND event_active AND tournament_active AND competitor_check_in


SELECT customer.customer_username FROM customer JOIN is_a ON is_a.customer_username = customer.customer_username LEFT OUTER JOIN competes ON is_a.event_name = competes.event_name AND is_a.event_start_date = competes.event_start_date AND is_a.event_location = competes.event_location AND is_a.tournament_name = competes.tournament_name AND is_a.competitor_number = competes.competitor_number LEFT OUTER JOIN submits ON submits.event_name = competes.event_name AND submits.event_start_date = competes.event_start_date AND submits.event_location = competes.event_location AND submits.tournament_name = competes.tournament_name AND submits.competitor_number = competes.competitor_number AND submits.round_number = competes.round_number AND submits.round_of = competes.round_of AND submits.match_number = competes.match_number LEFT OUTER JOIN match ON match.event_name = competes.event_name AND match.event_start_date = competes.event_start_date AND match.event_location = competes.event_location AND match.tournament_name = competes.tournament_name AND match.round_number = competes.round_number AND match.round_of = competes.round_of AND match.match_number = competes.match_number WHERE competes.event_name = 'Event 01' AND competes.event_start_date = '2015-03-25 09:00:00' AND competes.event_location = 'miradero' AND competes.tournament_name = 'Mortal Kombat X Qualifiers' AND competes.round_number = 4 AND competes.round_of = 'Winner' AND competes.match_number = 1 GROUP BY customer.customer_username

SELECT tournament_name, ('papaluisre' IN (SELECT customer.customer_username FROM customer JOIN is_a ON is_a.customer_username = customer.customer_username LEFT OUTER JOIN competes ON is_a.event_name = competes.event_name AND is_a.event_start_date = competes.event_start_date AND is_a.event_location = competes.event_location AND is_a.tournament_name = competes.tournament_name AND is_a.competitor_number = competes.competitor_number LEFT OUTER JOIN submits ON submits.event_name = competes.event_name AND submits.event_start_date = competes.event_start_date AND submits.event_location = competes.event_location AND submits.tournament_name = competes.tournament_name AND submits.competitor_number = competes.competitor_number AND submits.round_number = competes.round_number AND submits.round_of = competes.round_of AND submits.match_number = competes.match_number LEFT OUTER JOIN match ON match.event_name = competes.event_name AND match.event_start_date = competes.event_start_date AND match.event_location = competes.event_location AND match.tournament_name = competes.tournament_name AND match.round_number = competes.round_number AND match.round_of = competes.round_of AND match.match_number = competes.match_number WHERE competes.event_name = 'Event 01' AND competes.event_start_date = '2015-03-25 09:00:00' AND competes.event_location = 'miradero' AND competes.tournament_name = 'Mortal Kombat X Qualifiers' AND competes.round_number = 4 AND competes.round_of = 'Winner' AND competes.match_number = 1 GROUP BY customer.customer_username)) AS is_competitor FROM event NATURAL JOIN tournament NATURAL JOIN round NATURAL JOIN match WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers' AND round_number = 4 AND round_of = 'Winner' AND match_number = 1 AND event_active AND tournament_active

-- Edit best of
	-- First part, look for the amout of matches in that round and the current best_of value
SELECT round_best_of, (SELECT count(*) FROM match WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers' AND round_number = 2 AND round_of = 'Winner') AS matches FROM tournament NATURAL JOIN event NATURAL JOIN round WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers' AND round_number = 2 AND round_of = 'Winner' AND event_active AND tournament_active;


-- vvvvvvv Get the match history of a competitor
SELECT competes.competitor_number, sum(submits.score) AS score FROM competes LEFT OUTER JOIN submits ON submits.event_name = competes.event_name AND submits.event_start_date = competes.event_start_date AND submits.event_location = competes.event_location AND submits.tournament_name = competes.tournament_name AND submits.competitor_number = competes.competitor_number AND submits.round_number = competes.round_number AND submits.round_of = competes.round_of AND submits.match_number = competes.match_number WHERE competes.event_name = 'Event 01' AND competes.event_start_date = '2015-03-25 09:00:00' AND competes.event_location = 'miradero' AND competes.tournament_name = 'Mortal Kombat X Qualifiers' AND competes.round_number = 1 AND competes.round_of = 'Group' AND competes.match_number = 1 GROUP BY competes.competitor_number ORDER BY score DESC;

SELECT competes.round_number, competes.round_of, competes.match_number, ((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number)) AS win FROM competes WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers' AND (round_of = 'Winner' OR round_of = 'Loser' OR round_of = 'Round Robin')AND competitor_number = 4;
-- ^^^^^^^ Get the match history of a competitor

SELECT distinct competitor.competitor_number, competitor.competitor_seed FROM tournament LEFT OUTER JOIN is_a ON is_a.event_name = tournament.event_name AND is_a.event_start_date = tournament.event_start_date AND is_a.event_location = tournament.event_location AND is_a.tournament_name = tournament.tournament_name LEFT OUTER JOIN competes_for ON competes_for.event_name = tournament.event_name AND competes_for.event_start_date = tournament.event_start_date AND competes_for.event_location = tournament.event_location AND competes_for.tournament_name = tournament.tournament_name LEFT OUTER JOIN competitor ON tournament.event_name = competitor.event_name AND tournament.event_start_date = competitor.event_start_date AND tournament.event_location = competitor.event_location AND tournament.tournament_name = competitor.tournament_name AND (is_a.competitor_number = competitor.competitor_number OR competes_for.competitor_number = competitor.competitor_number) WHERE tournament.event_name = 'First Test' AND tournament.event_start_date = '2015-10-19 09:00:00' AND tournament.event_location = 'miradero' AND tournament.tournament_name = 'Super Smash Bros. Melee Qualifiers' AND competitor.competitor_check_in ORDER BY competitor.competitor_seed;


SELECT CASE WHEN tournament.team_size > 1 THEN team.team_name || ',;!;,' || team.team_logo ELSE customer.customer_username || ',;!;,' || customer.customer_profile_pic || ',;!;,' || customer.customer_tag END AS info, competitor.competitor_number, competitor.competitor_standing AS standing FROM competitor JOIN tournament ON competitor.event_name = tournament.event_name AND competitor.event_start_date = tournament.event_start_date AND competitor.event_location = tournament.event_location AND competitor.tournament_name = tournament.tournament_name JOIN is_a ON is_a.event_name = competitor.event_name AND is_a.event_start_date = competitor.event_start_date AND is_a.event_location = competitor.event_location AND is_a.tournament_name = competitor.tournament_name AND is_a.competitor_number = competitor.competitor_number JOIN customer ON customer.customer_username = is_a.customer_username LEFT OUTER JOIN competes_for ON competes_for.event_name = competitor.event_name AND competes_for.event_start_date = competitor.event_start_date AND competes_for.event_location = competitor.event_location AND competes_for.tournament_name = competitor.tournament_name AND competes_for.competitor_number = competitor.competitor_number LEFT OUTER JOIN team ON team.team_name = competes_for.team_name WHERE tournament.event_name = $1 AND tournament.event_start_date = $2 AND tournament.event_location = $3 AND tournament.tournament_name = $4 AND competitor.competitor_standing > 0 GROUP BY tournament.team_size, team.team_name, team.team_logo, customer.customer_username, customer.customer_profile_pic, customer.customer_tag, competitor.competitor_number, competitor.competitor_standing ORDER BY standing


SELECT customer.customer_username, customer.customer_first_name, customer.customer_last_name, customer.customer_tag, customer.customer_profile_pic, customer.customer_cover_photo, customer.customer_bio, customer.customer_country, customer.customer_email, sum(competitor.matches_won) AS wins, sum(competitor.matches_lost) AS loses, bool_and(customer.customer_username = $1) AS my_profile FROM customer LEFT OUTER JOIN is_a ON is_a.customer_username = customer.customer_username LEFT OUTER JOIN competitor ON is_a.event_name = competitor.event_name AND is_a.event_start_date = competitor.event_start_date AND is_a.event_location = competitor.event_location AND is_a.tournament_name = competitor.tournament_name AND is_a.competitor_number = competitor.competitor_number WHERE customer.customer_username = $2 AND customer.customer_active GROUP BY customer.customer_username, customer.customer_first_name, customer.customer_last_name, customer.customer_tag, customer.customer_profile_pic, customer.customer_cover_photo, customer.customer_bio, customer.customer_country, customer.customer_email

SELECT round_number, round_of, match_number FROM match WHERE (concat(round_number, round_of, match_number) NOT IN (SELECT concat(round_number, round_of, match_number) FROM is_played_in WHERE event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4)) AND (concat(round_number, round_of, match_number, 2) IN (SELECT concat(round_number, round_of, match_number, count(concat(round_number, round_of, match_number))) FROM competes WHERE event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4 GROUP BY round_number, round_of, match_number)) AND event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4 ORDER BY round_number, CASE WHEN round_of = 'Group' THEN 1 WHEN round_of = 'Round Robin' THEN 2 WHEN round_of = 'Loser' THEN 3 WHEN round_of = 'Winner' THEN 4 END, CASE WHEN $5 THEN is_favourite ELSE NOT is_favourite END LIMIT 1

-- v New and improved Station assignment
SELECT round_number, round_of, match_number FROM match WHERE (concat(round_number, round_of, match_number) NOT IN (SELECT concat(round_number, round_of, match_number) FROM is_played_in WHERE event_name = 'Input test' AND event_start_date = '2015-04-27 22:00:00' AND event_location = 'UPR Mayaguez' AND tournament_name = 'Dota 2 scrub tier')) AND event_name = 'Input test' AND event_start_date = '2015-04-27 22:00:00' AND event_location = 'UPR Mayaguez' AND tournament_name = 'Dota 2 scrub tier' ORDER BY CASE WHEN (concat(round_number, round_of, match_number, 2) IN (SELECT concat(round_number, round_of, match_number, count(concat(round_number, round_of, match_number))) FROM competes WHERE event_name = 'Input test' AND event_start_date = '2015-04-27 22:00:00' AND event_location = 'UPR Mayaguez' AND tournament_name = 'Dota 2 scrub tier' GROUP BY round_number, round_of, match_number)) THEN 1 ELSE 2 END, round_number, CASE WHEN round_of = 'Group' THEN 1 WHEN round_of = 'Round Robin' THEN 2 WHEN round_of = 'Loser' THEN 3 WHEN round_of = 'Winner' THEN 4 END, CASE WHEN false THEN is_favourite ELSE NOT is_favourite END LIMIT 1;


SELECT round_number, round_of, match_number FROM match WHERE (concat(round_number, round_of, match_number) NOT IN (SELECT concat(round_number, round_of, match_number) FROM is_played_in WHERE event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4)) AND event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4 ORDER BY CASE WHEN (concat(round_number, round_of, match_number, 2) IN (SELECT concat(round_number, round_of, match_number, count(concat(round_number, round_of, match_number))) FROM competes WHERE event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4 GROUP BY round_number, round_of, match_number)) THEN 1 ELSE 2 END, round_number, CASE WHEN round_of = 'Group' THEN 1 WHEN round_of = 'Round Robin' THEN 2 WHEN round_of = 'Loser' THEN 3 WHEN round_of = 'Winner' THEN 4 END, CASE WHEN $5 THEN is_favourite ELSE NOT is_favourite END LIMIT 1;
-- ^ New and improved Station assignment




INSERT INTO is_played_in (event_name, event_start_date, event_location, tournament_name, round_number, round_of, match_number, station_number) VALUES('Input test', '2015-04-27 22:00:00', 'UPR Mayaguez', 'Dota 2 scrub tier', 1, 'Group', 5, 1);


SELECT competes.competitor_number, sum(submits.score) AS score FROM is_set JOIN competes ON is_set.event_name = competes.event_name AND is_set.event_start_date = competes.event_start_date AND is_set.event_location = competes.event_location AND is_set.tournament_name = competes.tournament_name AND is_set.round_number = competes.round_number AND is_set.round_of = competes.round_of AND is_set.match_number = competes.match_number LEFT OUTER JOIN submits ON submits.event_name = competes.event_name AND submits.event_start_date = competes.event_start_date AND submits.event_location = competes.event_location AND submits.tournament_name = competes.tournament_name AND submits.competitor_number = competes.competitor_number AND submits.round_number = competes.round_number AND submits.round_of = competes.round_of AND submits.match_number = competes.match_number AND submits.set_seq = is_set.set_seq WHERE is_set.event_name = $1 AND is_set.event_start_date = $2 AND is_set.event_location = $3 AND is_set.tournament_name = $4 AND is_set.round_number = $5 AND is_set.round_of = $6 AND is_set.match_number = $7 GROUP BY competes.competitor_number



SELECT CASE WHEN tournament.team_size > 1 THEN team.team_name || $6 || team.team_logo ELSE customer.customer_username || $6 || customer.customer_profile_pic || $6 || customer.customer_tag END AS info, has_a.group_number, competitor.competitor_number, competitor.competitor_seed, sum(submits.score)/((round.round_best_of/2)+1) AS wins, CASE WHEN has_a.group_number = (SELECT count(*) FROM "group" WHERE event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4) THEN ((SELECT count(*) FROM is_a WHERE event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4) % tournament.number_of_people_per_group - 1) - sum(submits.score)/((round.round_best_of/2)+1) ELSE (tournament.number_of_people_per_group - 1) - sum(submits.score)/((round.round_best_of/2)+1) END AS loses, CASE WHEN row_number() OVER(ORDER BY has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) DESC, competitor.competitor_seed) % (tournament.number_of_people_per_group) = 0 THEN row_number() OVER(ORDER BY has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) DESC) % (tournament.number_of_people_per_group + 1) ELSE row_number() OVER(ORDER BY has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) DESC) % (tournament.number_of_people_per_group) END AS standing, (CASE WHEN row_number() OVER(ORDER BY has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) DESC, competitor.competitor_seed) % (tournament.number_of_people_per_group) = 0 THEN row_number() OVER(ORDER BY has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) DESC) % (tournament.number_of_people_per_group + 1) ELSE row_number() OVER(ORDER BY has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) DESC) % (tournament.number_of_people_per_group) END <= tournament.amount_of_winners_per_group) AS advanced FROM submits JOIN competes ON submits.event_name = competes.event_name AND submits.event_start_date = competes.event_start_date AND submits.event_location = competes.event_location AND submits.tournament_name = competes.tournament_name AND submits.round_of = competes.round_of AND submits.round_number = competes.round_number AND submits.competitor_number = competes.competitor_number JOIN round ON submits.event_name = round.event_name AND submits.event_start_date = round.event_start_date AND submits.event_location = round.event_location AND submits.tournament_name = round.tournament_name AND submits.round_of = round.round_of AND submits.round_number = round.round_number JOIN competitor ON competitor.event_name = competes.event_name AND competitor.event_start_date = competes.event_start_date AND competitor.event_location = competes.event_location AND competitor.tournament_name = competes.tournament_name AND competitor.competitor_number = competes.competitor_number JOIN has_a ON has_a.event_name = competes.event_name AND has_a.event_start_date = competes.event_start_date AND has_a.event_location = competes.event_location AND has_a.tournament_name = competes.tournament_name AND has_a.round_number = competes.round_number AND has_a.round_of = competes.round_of AND has_a.match_number = competes.match_number JOIN tournament ON submits.event_name = tournament.event_name AND submits.event_start_date = tournament.event_start_date AND submits.event_location = tournament.event_location AND submits.tournament_name = tournament.tournament_name JOIN is_a ON is_a.event_name = competitor.event_name AND is_a.event_start_date = competitor.event_start_date AND is_a.event_location = competitor.event_location AND is_a.tournament_name = competitor.tournament_name AND is_a.competitor_number = competitor.competitor_number JOIN customer ON customer.customer_username = is_a.customer_username LEFT OUTER JOIN competes_for ON competes_for.event_name = competitor.event_name AND competes_for.event_start_date = competitor.event_start_date AND competes_for.event_location = competitor.event_location AND competes_for.tournament_name = competitor.tournament_name AND competes_for.competitor_number = competitor.competitor_number LEFT OUTER JOIN team ON team.team_name = competes_for.team_name WHERE competes.event_name = $1 AND competes.event_start_date = $2 AND competes.event_location = $3 AND competes.tournament_name = $4 AND competes.round_of = $5 GROUP BY customer.customer_username, customer.customer_tag, customer.customer_profile_pic, round.round_best_of, has_a.group_number, competitor.competitor_seed, tournament.number_of_people_per_group, tournament.amount_of_winners_per_group, competitor.competitor_number, team.team_name, team.team_logo, tournament.team_size, team.team_name, team.team_logo ORDER BY has_a.group_number, wins DESC, competitor.competitor_seed, standing

SELECT CASE WHEN tournament.team_size > 1 THEN team.team_name || $6 || team.team_logo ELSE customer.customer_username || $6 || customer.customer_profile_pic || $6 || customer.customer_tag END AS info, has_a.group_number, competitor.competitor_number, competitor.competitor_seed FROM competes JOIN round ON competes.event_name = round.event_name AND competes.event_start_date = round.event_start_date AND competes.event_location = round.event_location AND competes.tournament_name = round.tournament_name AND competes.round_of = round.round_of AND competes.round_number = round.round_number JOIN competitor ON competitor.event_name = competes.event_name AND competitor.event_start_date = competes.event_start_date AND competitor.event_location = competes.event_location AND competitor.tournament_name = competes.tournament_name AND competitor.competitor_number = competes.competitor_number JOIN has_a ON has_a.event_name = competes.event_name AND has_a.event_start_date = competes.event_start_date AND has_a.event_location = competes.event_location AND has_a.tournament_name = competes.tournament_name AND has_a.round_number = competes.round_number AND has_a.round_of = competes.round_of AND has_a.match_number = competes.match_number JOIN tournament ON competes.event_name = tournament.event_name AND competes.event_start_date = tournament.event_start_date AND competes.event_location = tournament.event_location AND competes.tournament_name = tournament.tournament_name JOIN is_a ON is_a.event_name = competitor.event_name AND is_a.event_start_date = competitor.event_start_date AND is_a.event_location = competitor.event_location AND is_a.tournament_name = competitor.tournament_name AND is_a.competitor_number = competitor.competitor_number JOIN customer ON customer.customer_username = is_a.customer_username LEFT OUTER JOIN competes_for ON competes_for.event_name = competitor.event_name AND competes_for.event_start_date = competitor.event_start_date AND competes_for.event_location = competitor.event_location AND competes_for.tournament_name = competitor.tournament_name AND competes_for.competitor_number = competitor.competitor_number LEFT OUTER JOIN team ON team.team_name = competes_for.team_name LEFT OUTER JOIN submits ON submits.event_name = competes.event_name AND submits.event_start_date = competes.event_start_date AND submits.event_location = competes.event_location AND submits.tournament_name = competes.tournament_name AND submits.round_of = competes.round_of AND submits.round_number = competes.round_number AND submits.competitor_number = competes.competitor_number WHERE competes.event_name = $1 AND competes.event_start_date = $2 AND competes.event_location = $3 AND competes.tournament_name = $4 AND competes.round_of = $5 GROUP BY customer.customer_username, customer.customer_tag, customer.customer_profile_pic, round.round_best_of, has_a.group_number, competitor.competitor_seed, tournament.number_of_people_per_group, tournament.amount_of_winners_per_group, competitor.competitor_number, team.team_name, team.team_logo, tournament.team_size, team.team_name, team.team_logo ORDER BY has_a.group_number, CASE WHEN sum(submits.score)/((round.round_best_of/2)+1) IS NULL THEN 0 ELSE sum(submits.score)/((round.round_best_of/2)+1) END DESC, competitor.competitor_seed;


SELECT CASE WHEN tournament.team_size > 1 THEN team.team_name || ',;!;,' || team.team_logo ELSE customer.customer_username || ',;!;,' || customer.customer_profile_pic || ',;!;,' || customer.customer_tag END AS info, competitor.competitor_number, competitor.competitor_seed FROM competitor JOIN competes ON competitor.event_name = competes.event_name AND competitor.event_start_date = competes.event_start_date AND competitor.event_location = competes.event_location AND competitor.tournament_name = competes.tournament_name AND competes.round_of = 'Winner' JOIN tournament ON competitor.event_name = tournament.event_name AND competitor.event_start_date = tournament.event_start_date AND competitor.event_location = tournament.event_location AND competitor.tournament_name = tournament.tournament_name JOIN is_a ON is_a.event_name = competitor.event_name AND is_a.event_start_date = competitor.event_start_date AND is_a.event_location = competitor.event_location AND is_a.tournament_name = competitor.tournament_name AND is_a.competitor_number = competitor.competitor_number JOIN customer ON customer.customer_username = is_a.customer_username LEFT OUTER JOIN competes_for ON competes_for.event_name = competitor.event_name AND competes_for.event_start_date = competitor.event_start_date AND competes_for.event_location = competitor.event_location AND competes_for.tournament_name = competitor.tournament_name AND competes_for.competitor_number = competitor.competitor_number LEFT OUTER JOIN team ON team.team_name = competes_for.team_name WHERE tournament.event_name = 'Input test' AND tournament.event_start_date = '2015-04-27 22:00:00' AND tournament.event_location = 'UPR Mayaguez' AND tournament.tournament_name = 'Dota 2 scrub tier' AND competitor.competitor_seed > 0 GROUP BY tournament.team_size, team.team_name, team.team_logo, customer.customer_username, customer.customer_profile_pic, customer.customer_tag, competitor.competitor_number, competitor.competitor_seed, competitor.competitor_standing;

SELECT CASE WHEN tournament.team_size > 1 THEN team.team_name || ',;!;,' || team.team_logo ELSE customer.customer_username || ',;!;,' || customer.customer_profile_pic || ',;!;,' || customer.customer_tag END AS info, competitor.competitor_number, competitor.competitor_seed FROM competitor JOIN competes ON competitor.event_name = competes.event_name AND competitor.event_start_date = competes.event_start_date AND competitor.event_location = competes.event_location AND competitor.tournament_name = competes.tournament_name AND competes.round_of = 'Winner' JOIN tournament ON competitor.event_name = tournament.event_name AND competitor.event_start_date = tournament.event_start_date AND competitor.event_location = tournament.event_location AND competitor.tournament_name = tournament.tournament_name JOIN is_a ON is_a.event_name = competitor.event_name AND is_a.event_start_date = competitor.event_start_date AND is_a.event_location = competitor.event_location AND is_a.tournament_name = competitor.tournament_name AND is_a.competitor_number = competitor.competitor_number JOIN customer ON customer.customer_username = is_a.customer_username LEFT OUTER JOIN competes_for ON competes_for.event_name = competitor.event_name AND competes_for.event_start_date = competitor.event_start_date AND competes_for.event_location = competitor.event_location AND competes_for.tournament_name = competitor.tournament_name AND competes_for.competitor_number = competitor.competitor_number LEFT OUTER JOIN team ON team.team_name = competes_for.team_name WHERE tournament.event_name = 'Event 01' AND tournament.event_start_date = '2015-03-25 09:00:00' AND tournament.event_location = 'miradero' AND tournament.tournament_name = 'Mortal Kombat X Qualifiers' AND competitor.competitor_seed > 0 GROUP BY tournament.team_size, team.team_name, team.team_logo, customer.customer_username, customer.customer_profile_pic, customer.customer_tag, competitor.competitor_number, competitor.competitor_seed;

SELECT distinct competitor.competitor_number FROM competes NATURAL JOIN competitor WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers' AND round_of = 'Winner';


SELECT every(round_completed) AS stage_completed, count(SELECT distinct competitor.competitor_number FROM competes NATURAL JOIN competitor WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers' AND round_of = 'Winner') AS competitors FROM round WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers' AND round_of = 'Winner';


http://127.0.0.1:5000/matchup/events/Input test/tournaments/Dota 2 scrub tier/standings?date=2015-04-27 22:00:00&location=UPR Mayaguez

http://127.0.0.1:5000/matchup/events/Event 01/tournaments/Mortal Kombat X Qualifiers/standings?date=2015-03-25 09:00:00&location=miradero


SELECT CASE WHEN tournament.team_size > 1 THEN team.team_name || ',;!;,' || team.team_logo ELSE customer.customer_username || ',;!;,' || customer.customer_profile_pic || ',;!;,' || customer.customer_tag END AS info, competitor.competitor_number, competitor.competitor_seed FROM competitor JOIN competes ON competitor.event_name = competes.event_name AND competitor.event_start_date = competes.event_start_date AND competitor.event_location = competes.event_location AND competitor.tournament_name = competes.tournament_name AND competes.round_of = $5 JOIN tournament ON competitor.event_name = tournament.event_name AND competitor.event_start_date = tournament.event_start_date AND competitor.event_location = tournament.event_location AND competitor.tournament_name = tournament.tournament_name JOIN is_a ON is_a.event_name = competitor.event_name AND is_a.event_start_date = competitor.event_start_date AND is_a.event_location = competitor.event_location AND is_a.tournament_name = competitor.tournament_name AND is_a.competitor_number = competitor.competitor_number JOIN customer ON customer.customer_username = is_a.customer_username LEFT OUTER JOIN competes_for ON competes_for.event_name = competitor.event_name AND competes_for.event_start_date = competitor.event_start_date AND competes_for.event_location = competitor.event_location AND competes_for.tournament_name = competitor.tournament_name AND competes_for.competitor_number = competitor.competitor_number LEFT OUTER JOIN team ON team.team_name = competes_for.team_name WHERE tournament.event_name = $1 AND tournament.event_start_date = $2 AND tournament.event_location = $3 AND tournament.tournament_name = $4 AND competitor.competitor_seed > 0 GROUP BY tournament.team_size, team.team_name, team.team_logo, customer.customer_username, customer.customer_profile_pic, customer.customer_tag, competitor.competitor_number, competitor.competitor_seed;


SELECT CASE WHEN tournament.team_size > 1 THEN team.team_name || ',;!;,' || team.team_logo ELSE customer.customer_username || ',;!;,' || customer.customer_profile_pic || ',;!;,' || customer.customer_tag END AS info, competitor.competitor_number, competitor.competitor_seed FROM competitor JOIN competes ON competitor.event_name = competes.event_name AND competitor.event_start_date = competes.event_start_date AND competitor.event_location = competes.event_location AND competitor.tournament_name = competes.tournament_name AND competes.round_of = $5 JOIN tournament ON competitor.event_name = tournament.event_name AND competitor.event_start_date = tournament.event_start_date AND competitor.event_location = tournament.event_location AND competitor.tournament_name = tournament.tournament_name JOIN is_a ON is_a.event_name = competitor.event_name AND is_a.event_start_date = competitor.event_start_date AND is_a.event_location = competitor.event_location AND is_a.tournament_name = competitor.tournament_name AND is_a.competitor_number = competitor.competitor_number JOIN customer ON customer.customer_username = is_a.customer_username LEFT OUTER JOIN competes_for ON competes_for.event_name = competitor.event_name AND competes_for.event_start_date = competitor.event_start_date AND competes_for.event_location = competitor.event_location AND competes_for.tournament_name = competitor.tournament_name AND competes_for.competitor_number = competitor.competitor_number LEFT OUTER JOIN team ON team.team_name = competes_for.team_name WHERE tournament.event_name = $1 AND tournament.event_start_date = $2 AND tournament.event_location = $3 AND tournament.tournament_name = $4 AND competitor.competitor_seed > 0 GROUP BY tournament.team_size, team.team_name, team.team_logo, customer.customer_username, customer.customer_profile_pic, customer.customer_tag, competitor.competitor_number, competitor.competitor_seed



INSERT INTO is_confirmed (sponsor_name, sponsor_link, organization_name) VALUES('E-Sports PR', 'http://esportspr.com/', 'Badillo Org');
INSERT INTO is_confirmed (sponsor_name, sponsor_link, organization_name) VALUES('BANDI TECH', 'http://gobanditech.com/', 'Badillo Org');
INSERT INTO is_confirmed (sponsor_name, sponsor_link, organization_name) VALUES('Fighting Games Arena', 'https://twitter.com/FGAPR', 'Badillo Org');
INSERT INTO is_confirmed (sponsor_name, sponsor_link, organization_name) VALUES('See Puerto Rico', 'http://www.seepuertorico.com/', 'Badillo Org');


E-Sports PR               | http://esportspr.com/wp-content/uploads/2014/05/Esports-banner-2-tight-300x60.png | http://esportspr.com/
 Mario S. Fong Photography | http://neptunolabs.com/images/sponsors/MSFP.png                                   | https://www.facebook.com/MSFPhoto
 BANDI TECH                | http://neptunolabs.com/images/sponsors/Banditech1.png                             | http://gobanditech.com/
 Fighting Games Arena      | http://neptunolabs.com/images/sponsors/LogoFGA-440x1831.png                       | https://twitter.com/FGAPR
 See Puerto Rico           | http://neptunolabs.com/images/sponsors/Turismo-Logo.png                           | http://www.seepuertorico.com/
 American Petroleum        | http://neptunolabs.com/images/sponsors/American-Petroleum.png                     | http://www.americanpetroleumpr.com/
 FIRST ATTACK              | http://neptunolabs.com/images/sponsors/First-Attack-440x183-left.png              | http://www.firstattackpr.com/
 Team RagnaroK             | http://neptunolabs.com/images/sponsors/Team-Ragnarok-440x183-right.png            | https://twitter.com/TeamRagnarokPR




{
"players": [{
	"competitor_number": 4,
	"score": 1
},
{
	"competitor_number": 5,
	"score": 0
}]
}

SELECT CASE WHEN tournament.team_size > 1 THEN team.team_name || ',;!;,' || team.team_logo ELSE customer.customer_username || ',;!;,' || customer.customer_profile_pic || ',;!;,' || customer.customer_tag END AS info, competes.competitor_number, competitor.competitor_seed FROM competitor JOIN competes ON competitor.event_name = competes.event_name AND competitor.event_start_date = competes.event_start_date AND competitor.event_location = competes.event_location AND competitor.tournament_name = competes.tournament_name AND competes.round_of = $5 AND competitor.competitor_number = competes.competitor_number JOIN tournament ON competes.event_name = tournament.event_name AND competes.event_start_date = tournament.event_start_date AND competes.event_location = tournament.event_location AND competes.tournament_name = tournament.tournament_name JOIN is_a ON is_a.event_name = competes.event_name AND is_a.event_start_date = competes.event_start_date AND is_a.event_location = competes.event_location AND is_a.tournament_name = competes.tournament_name AND is_a.competitor_number = competes.competitor_number JOIN customer ON customer.customer_username = is_a.customer_username LEFT OUTER JOIN competes_for ON competes_for.event_name = competes.event_name AND competes_for.event_start_date = competes.event_start_date AND competes_for.event_location = competes.event_location AND competes_for.tournament_name = competes.tournament_name AND competes_for.competitor_number = competes.competitor_number LEFT OUTER JOIN team ON team.team_name = competes_for.team_name WHERE tournament.event_name = $1 AND tournament.event_start_date = $2 AND tournament.event_location = $3 AND tournament.tournament_name = $4 AND competitor.competitor_seed > 0 AND competes.round_of = $5 AND competitor.competitor_check_in GROUP BY tournament.team_size, team.team_name, team.team_logo, customer.customer_username, customer.customer_profile_pic, customer.customer_tag, competes.competitor_number, competitor.competitor_seed

SELECT competes.competitor_number, sum(submits.score) AS score FROM competes JOIN submits ON submits.event_name = competes.event_name AND submits.event_start_date = competes.event_start_date AND submits.event_location = competes.event_location AND submits.tournament_name = competes.tournament_name AND submits.competitor_number = competes.competitor_number AND submits.round_number = competes.round_number AND submits.round_of = competes.round_of AND submits.match_number = competes.match_number JOIN competitor ON competitor.event_name = competes.event_name AND competitor.event_start_date = competes.event_start_date AND competitor.event_location = competes.event_location AND competitor.tournament_name = competes.tournament_name AND competitor.competitor_number = competes.competitor_number WHERE competes.event_name = $1 AND competes.event_start_date = $2 AND competes.event_location = $3 AND competes.tournament_name = $4 AND competes.round_of = 'Winner' AND competes.round_number = (SELECT max(round_number) FROM round WHERE round_of = 'Winner' AND event_name = $1 AND event_start_date = $2  AND event_location = $3 AND tournament_name = $4) GROUP BY competes.competitor_number, competitor.matches_lost ORDER BY score DESC






SELECT team.team_name || $6 || team.team_logo AS info, has_a.group_number, competes.competitor_number, competitor.competitor_seed, sum(submits.score)/((round.round_best_of/2)+1) AS wins, CASE WHEN has_a.group_number = (SELECT count(*) FROM "group" WHERE event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4) THEN ((SELECT count(*) FROM competes_for WHERE event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4) % tournament.number_of_people_per_group - 1) - sum(submits.score)/((round.round_best_of/2)+1) ELSE (tournament.number_of_people_per_group - 1) - sum(submits.score)/((round.round_best_of/2)+1) END AS loses, CASE WHEN row_number() OVER(ORDER BY has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) DESC, competitor.competitor_seed) % (tournament.number_of_people_per_group) = 0 THEN row_number() OVER(ORDER BY has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) DESC) % (tournament.number_of_people_per_group + 1) ELSE row_number() OVER(ORDER BY has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) DESC) % (tournament.number_of_people_per_group) END AS standing, (CASE WHEN row_number() OVER(ORDER BY has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) DESC, competitor.competitor_seed) % (tournament.number_of_people_per_group) = 0 THEN row_number() OVER(ORDER BY has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) DESC) % (tournament.number_of_people_per_group + 1) ELSE row_number() OVER(ORDER BY has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) DESC) % (tournament.number_of_people_per_group) END <= tournament.amount_of_winners_per_group) AS advanced FROM submits JOIN competes ON submits.event_name = competes.event_name AND submits.event_start_date = competes.event_start_date AND submits.event_location = competes.event_location AND submits.tournament_name = competes.tournament_name AND submits.round_of = competes.round_of AND submits.round_number = competes.round_number AND submits.competitor_number = competes.competitor_number JOIN round ON submits.event_name = round.event_name AND submits.event_start_date = round.event_start_date AND submits.event_location = round.event_location AND submits.tournament_name = round.tournament_name AND submits.round_of = round.round_of AND submits.round_number = round.round_number JOIN competitor ON competitor.event_name = competes.event_name AND competitor.event_start_date = competes.event_start_date AND competitor.event_location = competes.event_location AND competitor.tournament_name = competes.tournament_name AND competitor.competitor_number = competes.competitor_number JOIN has_a ON has_a.event_name = competes.event_name AND has_a.event_start_date = competes.event_start_date AND has_a.event_location = competes.event_location AND has_a.tournament_name = competes.tournament_name AND has_a.round_number = competes.round_number AND has_a.round_of = competes.round_of AND has_a.match_number = competes.match_number JOIN tournament ON submits.event_name = tournament.event_name AND submits.event_start_date = tournament.event_start_date AND submits.event_location = tournament.event_location AND submits.tournament_name = tournament.tournament_name JOIN competes_for ON competes_for.event_name = competes.event_name AND competes_for.event_start_date = competes.event_start_date AND competes_for.event_location = competes.event_location AND competes_for.tournament_name = competes.tournament_name AND competes_for.competitor_number = competes.competitor_number JOIN team ON team.team_name = competes_for.team_name WHERE competes.event_name = $1 AND competes.event_start_date = $2 AND competes.event_location = $3 AND competes.tournament_name = $4 AND competes.round_of = $5 GROUP BY round.round_best_of, has_a.group_number, competitor.competitor_seed, tournament.number_of_people_per_group, tournament.amount_of_winners_per_group, competes.competitor_number, team.team_name, team.team_logo, tournament.team_size, team.team_name, team.team_logo, competes.competitor_number ORDER BY has_a.group_number, wins DESC, competitor.competitor_seed, standing

SELECT customer.customer_username || $6 || customer.customer_profile_pic || $6 || customer.customer_tag AS info, has_a.group_number, competes.competitor_number, competitor.competitor_seed, sum(submits.score)/((round.round_best_of/2)+1) AS wins, CASE WHEN has_a.group_number = (SELECT count(*) FROM "group" WHERE event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4) THEN ((SELECT count(*) FROM is_a WHERE event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4) % tournament.number_of_people_per_group - 1) - sum(submits.score)/((round.round_best_of/2)+1) ELSE (tournament.number_of_people_per_group - 1) - sum(submits.score)/((round.round_best_of/2)+1) END AS loses, CASE WHEN row_number() OVER(ORDER BY has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) DESC, competitor.competitor_seed) % (tournament.number_of_people_per_group) = 0 THEN row_number() OVER(ORDER BY has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) DESC) % (tournament.number_of_people_per_group + 1) ELSE row_number() OVER(ORDER BY has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) DESC) % (tournament.number_of_people_per_group) END AS standing, (CASE WHEN row_number() OVER(ORDER BY has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) DESC, competitor.competitor_seed) % (tournament.number_of_people_per_group) = 0 THEN row_number() OVER(ORDER BY has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) DESC) % (tournament.number_of_people_per_group + 1) ELSE row_number() OVER(ORDER BY has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) DESC) % (tournament.number_of_people_per_group) END <= tournament.amount_of_winners_per_group) AS advanced FROM submits JOIN competes ON submits.event_name = competes.event_name AND submits.event_start_date = competes.event_start_date AND submits.event_location = competes.event_location AND submits.tournament_name = competes.tournament_name AND submits.round_of = competes.round_of AND submits.round_number = competes.round_number AND submits.competitor_number = competes.competitor_number JOIN round ON submits.event_name = round.event_name AND submits.event_start_date = round.event_start_date AND submits.event_location = round.event_location AND submits.tournament_name = round.tournament_name AND submits.round_of = round.round_of AND submits.round_number = round.round_number JOIN competitor ON competitor.event_name = competes.event_name AND competitor.event_start_date = competes.event_start_date AND competitor.event_location = competes.event_location AND competitor.tournament_name = competes.tournament_name AND competitor.competitor_number = competes.competitor_number JOIN has_a ON has_a.event_name = competes.event_name AND has_a.event_start_date = competes.event_start_date AND has_a.event_location = competes.event_location AND has_a.tournament_name = competes.tournament_name AND has_a.round_number = competes.round_number AND has_a.round_of = competes.round_of AND has_a.match_number = competes.match_number JOIN tournament ON submits.event_name = tournament.event_name AND submits.event_start_date = tournament.event_start_date AND submits.event_location = tournament.event_location AND submits.tournament_name = tournament.tournament_name JOIN is_a ON is_a.event_name = competes.event_name AND is_a.event_start_date = competes.event_start_date AND is_a.event_location = competes.event_location AND is_a.tournament_name = competes.tournament_name AND is_a.competitor_number = competes.competitor_number JOIN customer ON customer.customer_username = is_a.customer_username WHERE competes.event_name = $1 AND competes.event_start_date = $2 AND competes.event_location = $3 AND competes.tournament_name = $4 AND competes.round_of = $5 GROUP BY customer.customer_username, customer.customer_tag, customer.customer_profile_pic, round.round_best_of, has_a.group_number, competitor.competitor_seed, tournament.number_of_people_per_group, tournament.amount_of_winners_per_group, competes.competitor_number, tournament.team_size, competes.competitor_number ORDER BY has_a.group_number, wins DESC, competitor.competitor_seed, standing



SELECT CASE WHEN tournament.team_size > 1 THEN team.team_name || ',;!;,' || team.team_logo ELSE customer.customer_username || ',;!;,' || customer.customer_profile_pic || ',;!;,' || customer.customer_tag END AS info, competes.competitor_number, competitor.competitor_seed FROM competitor JOIN competes ON competitor.event_name = competes.event_name AND competitor.event_start_date = competes.event_start_date AND competitor.event_location = competes.event_location AND competitor.tournament_name = competes.tournament_name AND (competes.round_of = $5 OR competes.round_of = $6) AND competitor.competitor_number = competes.competitor_number JOIN tournament ON competes.event_name = tournament.event_name AND competes.event_start_date = tournament.event_start_date AND competes.event_location = tournament.event_location AND competes.tournament_name = tournament.tournament_name JOIN is_a ON is_a.event_name = competes.event_name AND is_a.event_start_date = competes.event_start_date AND is_a.event_location = competes.event_location AND is_a.tournament_name = competes.tournament_name AND is_a.competitor_number = competes.competitor_number JOIN customer ON customer.customer_username = is_a.customer_username LEFT OUTER JOIN competes_for ON competes_for.event_name = competes.event_name AND competes_for.event_start_date = competes.event_start_date AND competes_for.event_location = competes.event_location AND competes_for.tournament_name = competes.tournament_name AND competes_for.competitor_number = competes.competitor_number LEFT OUTER JOIN team ON team.team_name = competes_for.team_name WHERE tournament.event_name = $1 AND tournament.event_start_date = $2 AND tournament.event_location = $3 AND tournament.tournament_name = $4 AND competitor.competitor_seed > 0 AND (competes.round_of = $5 OR competes.round_of = $6) AND competitor.competitor_check_in GROUP BY tournament.team_size, team.team_name, team.team_logo, customer.customer_username, customer.customer_profile_pic, customer.customer_tag, competes.competitor_number, competitor.competitor_seed



SELECT team.team_name || ',;!;,' || team.team_logo AS info, has_a.group_number, competitor.competitor_number, competitor.competitor_seed, competitor.competitor_number IN (SELECT competitor_number FROM competes WHERE event_name = 'New Team Test' AND event_start_date = '2015-05-02 04:00:00' AND event_location = 'Loc' AND tournament_name = 'Tourney 1' AND (round_of = 'Winner' OR round_of = 'Round Robin')) AS advanced, (SELECT count((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number)) AS wins FROM competes WHERE event_name = 'New Team Test' AND event_start_date = '2015-05-02 04:00:00' AND event_location = 'Loc' AND tournament_name = 'Tourney 1' AND CASE WHEN false THEN (round_of = 'Winner' OR round_of = 'Loser' OR round_of = 'Round Robin') ELSE round_of = 'Group' END AND competitor_number = competitor.competitor_number AND ((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number))) AS wins FROM submits JOIN competitor ON competitor.event_name = submits.event_name AND competitor.event_start_date = submits.event_start_date AND competitor.event_location = submits.event_location AND competitor.tournament_name = submits.tournament_name AND competitor.competitor_number = submits.competitor_number JOIN competes ON competitor.event_name = competes.event_name AND competitor.event_start_date = competes.event_start_date AND competitor.event_location = competes.event_location AND competitor.tournament_name = competes.tournament_name AND submits.round_of = competes.round_of AND submits.round_number = competes.round_number AND competitor.competitor_number = competes.competitor_number AND submits.match_number = competes.match_number JOIN round ON submits.event_name = round.event_name AND submits.event_start_date = round.event_start_date AND submits.event_location = round.event_location AND submits.tournament_name = round.tournament_name AND submits.round_of = round.round_of AND submits.round_number = round.round_number JOIN has_a ON has_a.event_name = competitor.event_name AND has_a.event_start_date = competitor.event_start_date AND has_a.event_location = competitor.event_location AND has_a.tournament_name = competitor.tournament_name AND has_a.round_number = competes.round_number AND has_a.round_of = competes.round_of AND has_a.match_number = competes.match_number JOIN tournament ON competitor.event_name = tournament.event_name AND competitor.event_start_date = tournament.event_start_date AND competitor.event_location = tournament.event_location AND competitor.tournament_name = tournament.tournament_name JOIN competes_for ON competes_for.event_name = competitor.event_name AND competes_for.event_start_date = competitor.event_start_date AND competes_for.event_location = competitor.event_location AND competes_for.tournament_name = competitor.tournament_name AND competes_for.competitor_number = competitor.competitor_number JOIN team ON team.team_name = competes_for.team_name WHERE competitor.event_name = 'New Team Test' AND competitor.event_start_date = '2015-05-02 04:00:00' AND competitor.event_location = 'Loc' AND competitor.tournament_name = 'Tourney 1' AND competes.round_of = 'Group' GROUP BY round.round_best_of, has_a.group_number, competitor.competitor_seed, tournament.number_of_people_per_group, tournament.amount_of_winners_per_group, competitor.competitor_number, team.team_name, team.team_logo, tournament.team_size, team.team_name, team.team_logo ORDER BY has_a.group_number DESC, competitor.competitor_seed;

-- You thought my other query was big... :biblethump:
SELECT team.team_name || ',;!;,' || team.team_logo AS info, has_a.group_number, competitor.competitor_number, competitor.competitor_seed, competitor.competitor_number IN (SELECT competitor_number FROM competes WHERE event_name = 'New Team Test' AND event_start_date = '2015-05-02 04:00:00' AND event_location = 'Loc' AND tournament_name = 'Tourney 1' AND (round_of = 'Winner' OR round_of = 'Round Robin')) AS advanced, CASE WHEN row_number() OVER(ORDER BY has_a.group_number, (SELECT count((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number)) AS wins FROM competes WHERE event_name = 'New Team Test' AND event_start_date = '2015-05-02 04:00:00' AND event_location = 'Loc' AND tournament_name = 'Tourney 1' AND CASE WHEN false THEN (round_of = 'Winner' OR round_of = 'Loser' OR round_of = 'Round Robin') ELSE round_of = 'Group' END AND competitor_number = competitor.competitor_number AND ((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number))) DESC, competitor.competitor_seed) % (tournament.number_of_people_per_group) = 0 THEN row_number() OVER(ORDER BY has_a.group_number, (SELECT count((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number)) AS wins FROM competes WHERE event_name = 'New Team Test' AND event_start_date = '2015-05-02 04:00:00' AND event_location = 'Loc' AND tournament_name = 'Tourney 1' AND CASE WHEN false THEN (round_of = 'Winner' OR round_of = 'Loser' OR round_of = 'Round Robin') ELSE round_of = 'Group' END AND competitor_number = competitor.competitor_number AND ((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number))) DESC, competitor.competitor_seed) % (tournament.number_of_people_per_group + 1) ELSE row_number() OVER(ORDER BY has_a.group_number, (SELECT count((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number)) AS wins FROM competes WHERE event_name = 'New Team Test' AND event_start_date = '2015-05-02 04:00:00' AND event_location = 'Loc' AND tournament_name = 'Tourney 1' AND CASE WHEN false THEN (round_of = 'Winner' OR round_of = 'Loser' OR round_of = 'Round Robin') ELSE round_of = 'Group' END AND competitor_number = competitor.competitor_number AND ((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number))) DESC, competitor.competitor_seed) % (tournament.number_of_people_per_group) END AS standing FROM submits JOIN competitor ON competitor.event_name = submits.event_name AND competitor.event_start_date = submits.event_start_date AND competitor.event_location = submits.event_location AND competitor.tournament_name = submits.tournament_name AND competitor.competitor_number = submits.competitor_number JOIN competes ON competitor.event_name = competes.event_name AND competitor.event_start_date = competes.event_start_date AND competitor.event_location = competes.event_location AND competitor.tournament_name = competes.tournament_name AND submits.round_of = competes.round_of AND submits.round_number = competes.round_number AND competitor.competitor_number = competes.competitor_number AND submits.match_number = competes.match_number JOIN round ON submits.event_name = round.event_name AND submits.event_start_date = round.event_start_date AND submits.event_location = round.event_location AND submits.tournament_name = round.tournament_name AND submits.round_of = round.round_of AND submits.round_number = round.round_number JOIN has_a ON has_a.event_name = competitor.event_name AND has_a.event_start_date = competitor.event_start_date AND has_a.event_location = competitor.event_location AND has_a.tournament_name = competitor.tournament_name AND has_a.round_number = competes.round_number AND has_a.round_of = competes.round_of AND has_a.match_number = competes.match_number JOIN tournament ON competitor.event_name = tournament.event_name AND competitor.event_start_date = tournament.event_start_date AND competitor.event_location = tournament.event_location AND competitor.tournament_name = tournament.tournament_name JOIN competes_for ON competes_for.event_name = competitor.event_name AND competes_for.event_start_date = competitor.event_start_date AND competes_for.event_location = competitor.event_location AND competes_for.tournament_name = competitor.tournament_name AND competes_for.competitor_number = competitor.competitor_number JOIN team ON team.team_name = competes_for.team_name WHERE competitor.event_name = 'New Team Test' AND competitor.event_start_date = '2015-05-02 04:00:00' AND competitor.event_location = 'Loc' AND competitor.tournament_name = 'Tourney 1' AND competes.round_of = 'Group' GROUP BY round.round_best_of, has_a.group_number, competitor.competitor_seed, tournament.number_of_people_per_group, tournament.amount_of_winners_per_group, competitor.competitor_number, team.team_name, team.team_logo, tournament.team_size ORDER BY has_a.group_number, standing;

SELECT team.team_name || $6 || team.team_logo AS info, has_a.group_number, competitor.competitor_number, competitor.competitor_seed, competitor.competitor_number IN (SELECT competitor_number FROM competes WHERE event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4 AND (round_of = $7 OR round_of = $8)) AS advanced, CASE WHEN row_number() OVER(ORDER BY has_a.group_number, (SELECT count((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number)) AS wins FROM competes WHERE event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4 AND CASE WHEN false THEN (round_of = $7 OR round_of = $9 OR round_of = $8) ELSE round_of = $5 END AND competitor_number = competitor.competitor_number AND ((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number))) DESC, competitor.competitor_seed) % (tournament.number_of_people_per_group) = 0 THEN row_number() OVER(ORDER BY has_a.group_number, (SELECT count((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number)) AS wins FROM competes WHERE event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4 AND CASE WHEN false THEN (round_of = $7 OR round_of = $9 OR round_of = $8) ELSE round_of = $5 END AND competitor_number = competitor.competitor_number AND ((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number))) DESC, competitor.competitor_seed) % (tournament.number_of_people_per_group + 1) ELSE row_number() OVER(ORDER BY has_a.group_number, (SELECT count((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number)) AS wins FROM competes WHERE event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4 AND CASE WHEN false THEN (round_of = $7 OR round_of = $9 OR round_of = $8) ELSE round_of = $5 END AND competitor_number = competitor.competitor_number AND ((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number))) DESC, competitor.competitor_seed) % (tournament.number_of_people_per_group) END AS standing FROM submits JOIN competitor ON competitor.event_name = submits.event_name AND competitor.event_start_date = submits.event_start_date AND competitor.event_location = submits.event_location AND competitor.tournament_name = submits.tournament_name AND competitor.competitor_number = submits.competitor_number JOIN competes ON competitor.event_name = competes.event_name AND competitor.event_start_date = competes.event_start_date AND competitor.event_location = competes.event_location AND competitor.tournament_name = competes.tournament_name AND submits.round_of = competes.round_of AND submits.round_number = competes.round_number AND competitor.competitor_number = competes.competitor_number AND submits.match_number = competes.match_number JOIN round ON submits.event_name = round.event_name AND submits.event_start_date = round.event_start_date AND submits.event_location = round.event_location AND submits.tournament_name = round.tournament_name AND submits.round_of = round.round_of AND submits.round_number = round.round_number JOIN has_a ON has_a.event_name = competitor.event_name AND has_a.event_start_date = competitor.event_start_date AND has_a.event_location = competitor.event_location AND has_a.tournament_name = competitor.tournament_name AND has_a.round_number = competes.round_number AND has_a.round_of = competes.round_of AND has_a.match_number = competes.match_number JOIN tournament ON competitor.event_name = tournament.event_name AND competitor.event_start_date = tournament.event_start_date AND competitor.event_location = tournament.event_location AND competitor.tournament_name = tournament.tournament_name JOIN competes_for ON competes_for.event_name = competitor.event_name AND competes_for.event_start_date = competitor.event_start_date AND competes_for.event_location = competitor.event_location AND competes_for.tournament_name = competitor.tournament_name AND competes_for.competitor_number = competitor.competitor_number JOIN team ON team.team_name = competes_for.team_name WHERE competitor.event_name = $1 AND competitor.event_start_date = $2 AND competitor.event_location = $3 AND competitor.tournament_name = $4 AND competes.round_of = $5 GROUP BY round.round_best_of, has_a.group_number, competitor.competitor_seed, tournament.number_of_people_per_group, tournament.amount_of_winners_per_group, competitor.competitor_number, team.team_name, team.team_logo, tournament.team_size ORDER BY has_a.group_number, standing

-- The same but not teams :biblethump:
SELECT customer.customer_username || ',;!;,' || customer.customer_profile_pic || ',;!;,' || customer.customer_tag AS info, has_a.group_number, competitor.competitor_number, competitor.competitor_seed, competitor.competitor_number IN (SELECT competitor_number FROM competes WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers' AND (round_of = 'Winner' OR round_of = 'Round Robin')) AS advanced, CASE WHEN row_number() OVER(ORDER BY has_a.group_number, (SELECT count((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number)) AS wins FROM competes WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers' AND CASE WHEN false THEN (round_of = 'Winner' OR round_of = 'Loser' OR round_of = 'Round Robin') ELSE round_of = 'Group' END AND competitor_number = competitor.competitor_number AND ((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number))) DESC, competitor.competitor_seed) % (tournament.number_of_people_per_group) = 0 THEN row_number() OVER(ORDER BY has_a.group_number, (SELECT count((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number)) AS wins FROM competes WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers' AND CASE WHEN false THEN (round_of = 'Winner' OR round_of = 'Loser' OR round_of = 'Round Robin') ELSE round_of = 'Group' END AND competitor_number = competitor.competitor_number AND ((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number))) DESC, competitor.competitor_seed) % (tournament.number_of_people_per_group + 1) ELSE row_number() OVER(ORDER BY has_a.group_number, (SELECT count((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number)) AS wins FROM competes WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers' AND CASE WHEN false THEN (round_of = 'Winner' OR round_of = 'Loser' OR round_of = 'Round Robin') ELSE round_of = 'Group' END AND competitor_number = competitor.competitor_number AND ((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number))) DESC, competitor.competitor_seed) % (tournament.number_of_people_per_group) END AS standing FROM submits JOIN competitor ON competitor.event_name = submits.event_name AND competitor.event_start_date = submits.event_start_date AND competitor.event_location = submits.event_location AND competitor.tournament_name = submits.tournament_name AND competitor.competitor_number = submits.competitor_number JOIN competes ON competitor.event_name = competes.event_name AND competitor.event_start_date = competes.event_start_date AND competitor.event_location = competes.event_location AND competitor.tournament_name = competes.tournament_name AND submits.round_of = competes.round_of AND submits.round_number = competes.round_number AND competitor.competitor_number = competes.competitor_number AND submits.match_number = competes.match_number JOIN round ON submits.event_name = round.event_name AND submits.event_start_date = round.event_start_date AND submits.event_location = round.event_location AND submits.tournament_name = round.tournament_name AND submits.round_of = round.round_of AND submits.round_number = round.round_number JOIN has_a ON has_a.event_name = competitor.event_name AND has_a.event_start_date = competitor.event_start_date AND has_a.event_location = competitor.event_location AND has_a.tournament_name = competitor.tournament_name AND has_a.round_number = competes.round_number AND has_a.round_of = competes.round_of AND has_a.match_number = competes.match_number JOIN tournament ON competitor.event_name = tournament.event_name AND competitor.event_start_date = tournament.event_start_date AND competitor.event_location = tournament.event_location AND competitor.tournament_name = tournament.tournament_name JOIN is_a ON is_a.event_name = competitor.event_name AND is_a.event_start_date = competitor.event_start_date AND is_a.event_location = competitor.event_location AND is_a.tournament_name = competitor.tournament_name AND is_a.competitor_number = competitor.competitor_number JOIN customer ON customer.customer_username = is_a.customer_username WHERE competitor.event_name = 'Event 01' AND competitor.event_start_date = '2015-03-25 09:00:00' AND competitor.event_location = 'miradero' AND competitor.tournament_name = 'Mortal Kombat X Qualifiers' AND competes.round_of = 'Group' GROUP BY round.round_best_of, has_a.group_number, competitor.competitor_seed, tournament.number_of_people_per_group, tournament.amount_of_winners_per_group, competitor.competitor_number, customer.customer_username, customer.customer_profile_pic, customer.customer_tag, tournament.team_size ORDER BY has_a.group_number, standing;

SELECT customer.customer_username || $6 || customer.customer_profile_pic || $6 || customer.customer_tag AS info, has_a.group_number, competitor.competitor_number, competitor.competitor_seed, competitor.competitor_number IN (SELECT competitor_number FROM competes WHERE event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4 AND (round_of = $7 OR round_of = $8)) AS advanced, CASE WHEN row_number() OVER(ORDER BY has_a.group_number, (SELECT count((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number)) AS wins FROM competes WHERE event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4 AND CASE WHEN false THEN (round_of = $7 OR round_of = $9 OR round_of = $8) ELSE round_of = $5 END AND competitor_number = competitor.competitor_number AND ((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number))) DESC, competitor.competitor_seed) % (tournament.number_of_people_per_group) = 0 THEN row_number() OVER(ORDER BY has_a.group_number, (SELECT count((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number)) AS wins FROM competes WHERE event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4 AND CASE WHEN false THEN (round_of = $7 OR round_of = $9 OR round_of = $8) ELSE round_of = $5 END AND competitor_number = competitor.competitor_number AND ((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number))) DESC, competitor.competitor_seed) % (tournament.number_of_people_per_group + 1) ELSE row_number() OVER(ORDER BY has_a.group_number, (SELECT count((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number)) AS wins FROM competes WHERE event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4 AND CASE WHEN false THEN (round_of = $7 OR round_of = $9 OR round_of = $8) ELSE round_of = $5 END AND competitor_number = competitor.competitor_number AND ((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number))) DESC, competitor.competitor_seed) % (tournament.number_of_people_per_group) END AS standing FROM submits JOIN competitor ON competitor.event_name = submits.event_name AND competitor.event_start_date = submits.event_start_date AND competitor.event_location = submits.event_location AND competitor.tournament_name = submits.tournament_name AND competitor.competitor_number = submits.competitor_number JOIN competes ON competitor.event_name = competes.event_name AND competitor.event_start_date = competes.event_start_date AND competitor.event_location = competes.event_location AND competitor.tournament_name = competes.tournament_name AND submits.round_of = competes.round_of AND submits.round_number = competes.round_number AND competitor.competitor_number = competes.competitor_number AND submits.match_number = competes.match_number JOIN round ON submits.event_name = round.event_name AND submits.event_start_date = round.event_start_date AND submits.event_location = round.event_location AND submits.tournament_name = round.tournament_name AND submits.round_of = round.round_of AND submits.round_number = round.round_number JOIN has_a ON has_a.event_name = competitor.event_name AND has_a.event_start_date = competitor.event_start_date AND has_a.event_location = competitor.event_location AND has_a.tournament_name = competitor.tournament_name AND has_a.round_number = competes.round_number AND has_a.round_of = competes.round_of AND has_a.match_number = competes.match_number JOIN tournament ON competitor.event_name = tournament.event_name AND competitor.event_start_date = tournament.event_start_date AND competitor.event_location = tournament.event_location AND competitor.tournament_name = tournament.tournament_name JOIN is_a ON is_a.event_name = competitor.event_name AND is_a.event_start_date = competitor.event_start_date AND is_a.event_location = competitor.event_location AND is_a.tournament_name = competitor.tournament_name AND is_a.competitor_number = competitor.competitor_number JOIN customer ON customer.customer_username = is_a.customer_username WHERE competitor.event_name = $1 AND competitor.event_start_date = $2 AND competitor.event_location = $3 AND competitor.tournament_name = $4 AND competes.round_of = $5 GROUP BY round.round_best_of, has_a.group_number, competitor.competitor_seed, tournament.number_of_people_per_group, tournament.amount_of_winners_per_group, competitor.competitor_number, customer.customer_username, customer.customer_profile_pic, customer.customer_tag, tournament.team_size ORDER BY has_a.group_number, standing

SELECT count((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number)) AS wins FROM competes WHERE event_name = 'New Team Test' AND event_start_date = '2015-05-02 04:00:00' AND event_location = 'Loc' AND tournament_name = 'Tourney 1' AND CASE WHEN false THEN (round_of = 'Winner' OR round_of = 'Loser' OR round_of = 'Round Robin') ELSE round_of = 'Group' END AND competitor_number = 1 AND ((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number));

SELECT competes.round_number, competes.round_of, competes.match_number, ((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number)) AS win, (SELECT count(*) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number) > 0 AS in_progress FROM competes WHERE event_name = 'New Team Test' AND event_start_date = '2015-05-02 04:00:00' AND event_location = 'Loc' AND tournament_name = 'Tourney 1' AND CASE WHEN false THEN (round_of = 'Winner' OR round_of = 'Loser' OR round_of = 'Round Robin') ELSE round_of = 'Group' END AND competitor_number = 1;



row_number() OVER(ORDER BY (SELECT count((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number)) AS wins FROM competes WHERE event_name = 'New Team Test' AND event_start_date = '2015-05-02 04:00:00' AND event_location = 'Loc' AND tournament_name = 'Tourney 1' AND CASE WHEN false THEN (round_of = 'Winner' OR round_of = 'Loser' OR round_of = 'Round Robin') ELSE round_of = 'Group' END AND competitor_number = competitor.competitor_number AND ((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number))) DESC, competitor.competitor_seed)


CASE WHEN row_number() OVER(ORDER BY has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) DESC, competitor.competitor_seed) % (tournament.number_of_people_per_group) = 0 THEN row_number() OVER(ORDER BY has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) DESC) % (tournament.number_of_people_per_group + 1) ELSE row_number() OVER(ORDER BY has_a.group_number, sum(submits.score)/((round.round_best_of/2)+1) DESC) % (tournament.number_of_people_per_group) END AS standing

SELECT NOT (round_number IN (SELECT future_round_number FROM competitor_goes_to WHERE event_name = 'New 4 Double' AND event_start_date = '2015-05-02 20:30:00' AND event_location = 'Location' AND tournament_name = 'Teams')) AS extra_round FROM round WHERE event_name = 'New 4 Double' AND event_start_date = '2015-05-02 20:30:00' AND event_location = 'Location' AND tournament_name = 'Teams' AND round_number = 3;

SELECT round_number IN (SELECT future_round_number FROM competitor_goes_to WHERE event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4) AS extra_round FROM round WHERE event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4 AND round_number = $5

--
SELECT round_number IN (SELECT future_round_number FROM competitor_goes_to WHERE event_name = 'New 4 Double' AND event_start_date = '2015-05-02 20:30:00' AND event_location = 'Location' AND tournament_name = 'Teams') AS extra_round FROM round WHERE event_name = 'New 4 Double' AND event_start_date = '2015-05-02 20:30:00' AND event_location = 'Location' AND tournament_name = 'Teams' AND round_number = 3;































































































SELECT competes.competitor_number FROM competes WHERE competes.event_name = $1 AND competes.event_start_date = $2 AND competes.event_location = $3 AND competes.tournament_name = $4 AND competes.round_number = $5 AND competes.round_of = $6 AND (competes.competitor_number NOT IN (SELECT competitor_number FROM competes JOIN competitor_goes_to ON competes.event_name = competitor_goes_to.event_name AND competes.event_start_date = competitor_goes_to.event_start_date AND competes.event_location = competitor_goes_to.event_location AND competes.tournament_name = competitor_goes_to.tournament_name AND competes.round_number = competitor_goes_to.future_round_number AND competes.round_of = competitor_goes_to.future_round_of AND competes.match_number = competitor_goes_to.future_match WHERE competitor_goes_to.is_winner AND competitor_goes_to.future_round_number = $7 AND competitor_goes_to.future_round_of = $8 AND competitor_goes_to.event_name = $1 AND competitor_goes_to.event_start_date = $2 AND competitor_goes_to.event_location = $3 AND competitor_goes_to.tournament_name = $4)) ORDER BY competes.round_number DESC, competes.match_number

SELECT competes.competitor_number FROM competes WHERE competes.event_name = 'New 4 Double' AND competes.event_start_date = '2015-05-02 20:30:00' AND competes.event_location = 'Location' AND competes.tournament_name = 'Teams' AND competes.round_number = 1 AND competes.round_of = 'Loser' AND (competes.competitor_number NOT IN (SELECT competitor_number FROM competes JOIN competitor_goes_to ON competes.event_name = competitor_goes_to.event_name AND competes.event_start_date = competitor_goes_to.event_start_date AND competes.event_location = competitor_goes_to.event_location AND competes.tournament_name = competitor_goes_to.tournament_name AND competes.round_number = competitor_goes_to.future_round_number AND competes.round_of = competitor_goes_to.future_round_of AND competes.match_number = competitor_goes_to.future_match WHERE competitor_goes_to.is_winner AND competitor_goes_to.future_round_number = '2' AND competitor_goes_to.future_round_of = 'Loser' AND competitor_goes_to.event_name = 'New 4 Double' AND competitor_goes_to.event_start_date = '2015-05-02 20:30:00' AND competitor_goes_to.event_location = 'Location' AND competitor_goes_to.tournament_name = 'Teams')) ORDER BY competes.round_number DESC, competes.match_number













SELECT future_round_number, future_round_of, future_match, (SELECT competitor_number FROM competes WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers' AND round_number = 2 AND round_of = 'Winner' AND match_number = 1 AND competitor_number NOT IN (5)) AS opponent FROM competitor_goes_to WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers' AND past_round_number = 2 AND past_round_of = 'Winner' AND past_match = 1 AND is_winner = true;


SELECT future_round_number, future_round_of, future_match, (SELECT competitor_number FROM competes WHERE event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4 AND round_number = $5 AND round_of = $6 AND match_number = $7 AND competitor_number NOT IN ($9)) AS opponent FROM competitor_goes_to WHERE event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4 AND past_round_number = $5 AND past_round_of = $6 AND past_match = $7 AND is_winner = $8

SELECT future_round_number, future_round_of, future_match, (SELECT competitor_number FROM competes WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25T09:00:00.000Z' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers' AND round_number = 2 AND round_of = 'Winner' AND match_number = 1 AND competitor_number NOT IN (5)) AS opponent FROM competitor_goes_to WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25T09:00:00.000Z' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers' AND past_round_number = 2 AND past_round_of = 'Winner' AND past_match = 1 AND is_winner = true;


SELECT competes.round_number, competes.round_of, competes.match_number, ((SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number = competes.competitor_number) > (SELECT sum(submits.score) FROM submits WHERE event_name = competes.event_name AND event_start_date = competes.event_start_date AND event_location = competes.event_location AND tournament_name = competes.tournament_name AND round_number = competes.round_number AND round_of = competes.round_of AND match_number = competes.match_number AND competitor_number <> competes.competitor_number)) AS win FROM competes WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers' AND CASE WHEN true THEN (round_of = 'Winner' OR round_of = 'Loser' OR round_of = 'Round Robin') ELSE round_of = 'Group' END AND competitor_number = 4;


SELECT round_number, round_of, match_number FROM match WHERE (concat(round_number, round_of, match_number) NOT IN (SELECT concat(round_number, round_of, match_number) FROM is_played_in WHERE event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4)) AND event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4 ORDER BY CASE WHEN (concat(round_number, round_of, match_number, 2) IN (SELECT concat(round_number, round_of, match_number, count(concat(round_number, round_of, match_number))) FROM competes WHERE event_name = $1 AND event_start_date = $2 AND event_location = $3 AND tournament_name = $4 GROUP BY round_number, round_of, match_number)) THEN 1 ELSE 2 END, round_number, CASE WHEN round_of = 'Group' THEN 1 WHEN round_of = 'Round Robin' THEN 2 WHEN round_of = 'Loser' THEN 3 WHEN round_of = 'Winner' THEN 4 END, CASE WHEN $5 THEN is_favourite ELSE NOT is_favourite END LIMIT 1

SELECT tournament.score_type, tournament.number_of_people_per_group, tournament.amount_of_winners_per_group, round.round_best_of, tournament.tournament_format, is_played_in.station_number, stream.stream_link FROM event NATURAL JOIN tournament NATURAL JOIN round NATURAL JOIN match LEFT OUTER JOIN is_played_in ON match.event_name = is_played_in.event_name AND match.event_start_date = is_played_in.event_start_date AND match.event_location = is_played_in.event_location AND match.tournament_name = is_played_in.tournament_name AND match.round_number = is_played_in.round_number AND match.round_of = is_played_in.round_of AND match.match_number = is_played_in.match_number LEFT OUTER JOIN stream ON stream.event_name = is_played_in.event_name AND stream.event_start_date = is_played_in.event_start_date AND stream.event_location = is_played_in.event_location AND stream.station_number = is_played_in.station_number WHERE match.event_name = 'Event 01' AND match.event_start_date = '2015-03-25 09:00:00' AND match.event_location = 'miradero' AND match.tournament_name = 'Mortal Kombat X Qualifiers' AND match.round_number = 4 AND match.round_of = 'Winner' AND match.match_number = 1 AND event.event_active

SELECT round_number, round_of, match_number FROM match WHERE (concat(round_number, round_of, match_number) NOT IN (SELECT concat(round_number, round_of, match_number) FROM is_played_in WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers')) AND (concat(round_number, round_of, match_number, 2) IN (SELECT concat(round_number, round_of, match_number, count(concat(round_number, round_of, match_number))) FROM competes WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers' GROUP BY round_number, round_of, match_number)) AND event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers' ORDER BY round_number, CASE WHEN round_of = 'Group' THEN 1 WHEN round_of = 'Round Robin' THEN 2 WHEN round_of = 'Loser' THEN 3 WHEN round_of = 'Winner' THEN 4 END LIMIT 1

is_played_in.event_name = report.event_name AND is_played_in.event_start_date = report.event_start_date AND is_played_in.event_location = report.event_location AND is_played_in.tournament_name = report.tournament_name AND is_played_in.round_number = report.round_number AND is_played_in.round_of = report.round_of AND is_played_in.match_number = report.match_number

SELECT max(competitor.competitor_standing) FROM competitor JOIN is_a ON is_a.event_name = competitor.event_name AND is_a.event_start_date = competitor.event_start_date AND is_a.event_location = competitor.event_location AND is_a.tournament_name = competitor.tournament_name AND is_a.competitor_number = competitor.competitor_number JOIN tournament ON competitor.event_name = tournament.event_name AND competitor.event_start_date = tournament.event_start_date AND competitor.event_location = tournament.event_location AND competitor.tournament_name = tournament.tournament_name JOIN customer ON customer.customer_username = is_a.customer_username WHERE is_a.event_name = 'Event 01' AND is_a.event_start_date = '2015-03-25 09:00:00' AND is_a.event_location = 'miradero' AND is_a.tournament_name = 'Mortal Kombat X Qualifiers' AND competitor.competitor_standing > 0;

CASE WHEN has_a.group_number = (SELECT count(*) FROM "group" WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers') THEN ((SELECT count(*) FROM is_a WHERE event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers') % tournament.number_of_people_per_group - 1) - sum(submits.score)/((round.round_best_of/2)+1) ELSE (tournament.number_of_people_per_group - 1) - sum(submits.score)/((round.round_best_of/2)+1) END AS loses

sum(submits.score)/((round.round_best_of/2)+1) AS wins

SELECT customer.customer_username, customer.customer_profile_pic, customer.customer_tag, competitor.competitor_standing AS standing FROM competitor JOIN is_a ON is_a.event_name = competitor.event_name AND is_a.event_start_date = competitor.event_start_date AND is_a.event_location = competitor.event_location AND is_a.tournament_name = competitor.tournament_name AND is_a.competitor_number = competitor.competitor_number JOIN tournament ON competitor.event_name = tournament.event_name AND competitor.event_start_date = tournament.event_start_date AND competitor.event_location = tournament.event_location AND competitor.tournament_name = tournament.tournament_name JOIN customer ON customer.customer_username = is_a.customer_username WHERE is_a.event_name = 'Event 01' AND is_a.event_start_date = '2015-03-25 09:00:00' AND is_a.event_location = 'miradero' AND is_a.tournament_name = 'Mortal Kombat X Qualifiers' AND competitor.competitor_standing > 0 ORDER BY standing;

SELECT customer.customer_username, customer.customer_profile_pic, customer.customer_tag, competitor.competitor_standing AS standing FROM submits JOIN competes ON submits.event_name = competes.event_name AND submits.event_start_date = competes.event_start_date AND submits.event_location = competes.event_location AND submits.tournament_name = competes.tournament_name AND submits.round_of = competes.round_of AND submits.round_number = competes.round_number AND submits.competitor_number = competes.competitor_number JOIN round ON submits.event_name = round.event_name AND submits.event_start_date = round.event_start_date AND submits.event_location = round.event_location AND submits.tournament_name = round.tournament_name AND submits.round_of = round.round_of AND submits.round_number = round.round_number JOIN competitor ON competitor.event_name = competes.event_name AND competitor.event_start_date = competes.event_start_date AND competitor.event_location = competes.event_location AND competitor.tournament_name = competes.tournament_name AND competitor.competitor_number = competes.competitor_number JOIN tournament ON submits.event_name = tournament.event_name AND submits.event_start_date = tournament.event_start_date AND submits.event_location = tournament.event_location AND submits.tournament_name = tournament.tournament_name JOIN is_a ON is_a.event_name = competitor.event_name AND is_a.event_start_date = competitor.event_start_date AND is_a.event_location = competitor.event_location AND is_a.tournament_name = competitor.tournament_name AND is_a.competitor_number = competitor.competitor_number JOIN customer ON customer.customer_username = is_a.customer_username WHERE competes.event_name = 'Event 01' AND competes.event_start_date = '2015-03-25 09:00:00' AND competes.event_location = 'miradero' AND competes.tournament_name = 'Mortal Kombat X Qualifiers' AND competitor.competitor_standing > 0 AND round.round_of = 'Winner' OR round.round_of = 'Loser' GROUP BY customer.customer_username, customer.customer_tag, customer.customer_profile_pic, round.round_best_of, competitor.competitor_standing ORDER BY standing;



 SELECT competes.competitor_number, sum(submits.score) AS score FROM submits JOIN competes ON submits.event_name = competes.event_name AND submits.event_start_date = competes.event_start_date AND submits.event_location = competes.event_location AND submits.tournament_name = competes.tournament_name AND submits.round_of = competes.round_of AND submits.round_number = competes.round_number AND submits.competitor_number = competes.competitor_number WHERE competes.event_name = 'Event 01' AND competes.event_start_date = '2015-03-25 09:00:00' AND competes.event_location = 'miradero' AND competes.tournament_name = 'Mortal Kombat X Qualifiers' AND competes.round_number = 1 AND competes.round_of = 'Group' AND competes.match_number = 1 GROUP BY customer.customer_tag, customer.customer_profile_pic;

SELECT round_number, match_number FROM match WHERE (concat(event_name, event_start_date, event_location, tournament_name, round_number, round_of, match_number) IN (SELECT concat(event_name, event_start_date, event_location, tournament_name, round_number, round_of, match_number) FROM competes WHERE competitor_number = 1) AND concat(event_name, event_start_date, event_location, tournament_name, round_number, round_of, match_number) IN (SELECT concat(event_name, event_start_date, event_location, tournament_name, round_number, round_of, match_number) FROM competes WHERE competitor_number = 3)) AND event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers' AND round_of = 'Group';

SELECT competes.competitor_number, sum(submits.score) AS score FROM competes JOIN submits ON submits.event_name = competes.event_name AND submits.event_start_date = competes.event_start_date AND submits.event_location = competes.event_location AND submits.tournament_name = competes.tournament_name AND submits.competitor_number = competes.competitor_number AND submits.round_number = competes.round_number AND submits.round_of = competes.round_of AND submits.match_number = competes.match_number WHERE (competes.event_name, competes.event_start_date, competes.event_location, competes.tournament_name, competes.round_number, competes.round_of, competes.match_number) = (SELECT event_name, event_start_date, event_location, tournament_name, round_number, round_of, match_number FROM match WHERE (concat(event_name, event_start_date, event_location, tournament_name, round_number, round_of, match_number) IN (SELECT concat(event_name, event_start_date, event_location, tournament_name, round_number, round_of, match_number) FROM competes WHERE competitor_number = 1) AND concat(event_name, event_start_date, event_location, tournament_name, round_number, round_of, match_number) IN (SELECT concat(event_name, event_start_date, event_location, tournament_name, round_number, round_of, match_number) FROM competes WHERE competitor_number = 3)) AND event_name = 'Event 01' AND event_start_date = '2015-03-25 09:00:00' AND event_location = 'miradero' AND tournament_name = 'Mortal Kombat X Qualifiers' AND round_of = 'Group') GROUP BY competes.competitor_number ORDER BY score DESC;

SELECT match.event_name, match.event_start_date, match.event_location, match.tournament_name, match.round_number, match.round_of, match.match_number, tournament.is_team_based FROM match JOIN competes ON match.event_name = competes.event_name AND match.event_start_date = competes.event_start_date AND match.event_location = competes.event_location AND match.tournament_name = competes.tournament_name AND match.round_number = competes.round_number AND match.round_of = competes.round_of AND match.match_number = competes.match_number WHERE is_a.customer_username = 'rapol' AND match.match_completed;